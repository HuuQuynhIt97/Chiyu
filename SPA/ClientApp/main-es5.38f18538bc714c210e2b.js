!function(){function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},RnhZ:function(e,t,n){var r={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn-bd":"loYQ","./bn-bd.js":"loYQ","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-in":"7C5Q","./en-in.js":"7C5Q","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./en-sg":"t+mt","./en-sg.js":"t+mt","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-mx":"tbfe","./es-mx.js":"tbfe","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fil":"1ppg","./fil.js":"1ppg","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-deva":"qvJo","./gom-deva.js":"qvJo","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./oc-lnc":"Fnuy","./oc-lnc.js":"Fnuy","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tk":"Wv91","./tk.js":"Wv91","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-mo":"OmwH","./zh-mo.js":"OmwH","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id="RnhZ"},zUnb:function(t,r,a){"use strict";a.r(r);var o,s=a("cUpR"),u=a("8Y7J"),c=a("SVse"),l=a("omvX"),h=a("aLe/"),d=a("rVqu"),g=a("iInd"),b=a("dgaq"),p=((o=function(){function e(t,r){n(this,e),this.router=t,this.iconSet=r,r.icons=Object.assign({},b.a)}return i(e,[{key:"ngOnInit",value:function(){this.router.events.subscribe(function(e){e instanceof g.b&&window.scrollTo(0,0)})}}]),e}()).\u0275fac=function(e){return new(e||o)(u.Nb(g.c),u.Nb(d.c))},o.\u0275cmp=u.Hb({type:o,selectors:[["body"]],features:[u.zb([d.c])],decls:1,vars:0,template:function(e,t){1&e&&u.Ob(0,"router-outlet")},directives:[g.h],encapsulation:2}),o),f=a("2Vo4"),v=a("IheW"),m={production:!0,systemCode:3,apiUrlEC:"http://10.4.4.224:80/api/",apiUrl:"http://10.4.0.70:1018/api/",apiUrl2:"http://10.4.0.70:1018/api/",hub:"http://10.4.4.224:80/ec-hub",scalingHub:"http://10.4.4.224:80/ec-hub",scalingHubLocal:"http://localhost:5001/scalingHub",_mqtt:{server:"mqtt.myweb.com",protocol:"wss",port:1883},get mqtt(){return this._mqtt},set mqtt(e){this._mqtt=e}};new v.d({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var y,S,k,w,T,O,j,D=((y=function(){function e(t){n(this,e),this.http=t,this.baseUrl=m.apiUrl,this.messageSource=new f.a(0),this.currentMessage=this.messageSource.asObservable()}return i(e,[{key:"changeMessage",value:function(e){this.messageSource.next(e)}},{key:"delete",value:function(e){return this.http.delete("".concat(this.baseUrl,"Oc/Delete/").concat(e))}},{key:"rename",value:function(e){return this.http.put("".concat(this.baseUrl,"Oc/Update"),e)}},{key:"getOCs",value:function(){return this.http.get("".concat(this.baseUrl,"Oc/GetAllAsTreeView"))}},{key:"GetUserByOCname",value:function(e){return this.http.get("".concat(this.baseUrl,"Oc/GetUserByOCname/").concat(e),{})}},{key:"GetUserByOcID",value:function(e){return this.http.get("".concat(this.baseUrl,"Oc/GetUserByOcID/").concat(e),{})}},{key:"getAllGroup",value:function(){return this.http.get("".concat(this.baseUrl,"Oc/GetAllGroup104574"))}},{key:"getResultByGroup",value:function(e,t,n){return this.http.get("".concat(this.baseUrl,"Oc/GetResultByGroup/").concat(e,"/").concat(t,"/").concat(n),{})}},{key:"addOC",value:function(e){return this.http.post("".concat(this.baseUrl,"Oc/Add"),e)}},{key:"updateOC",value:function(e){return this.http.put("".concat(this.baseUrl,"Oc/Update"),e)}},{key:"mapUserOC",value:function(e){return this.http.post("".concat(this.baseUrl,"Oc/MappingUserOC"),e)}},{key:"mapRangeUserOC",value:function(e){return this.http.post("".concat(this.baseUrl,"Oc/MappingRangeUserOC"),e)}},{key:"removeUserOC",value:function(e){return this.http.post("".concat(this.baseUrl,"Oc/RemoveUserOC"),e)}},{key:"createMainOC",value:function(e){return this.http.post("".concat(this.baseUrl,"Ocs/CreateOc"),e)}},{key:"createSubOC",value:function(e){return this.http.post("".concat(this.baseUrl,"Ocs/CreateSubOC"),e)}}]),e}()).\u0275fac=function(e){return new(e||y)(u.ac(v.b))},y.\u0275prov=u.Jb({token:y,factory:y.\u0275fac,providedIn:"root"}),y),E=a("lJxs"),U=a("tl5U"),x=((S=function(){function e(){n(this,e),this.$swal=Swal,this.Toast=Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}})}return i(e,[{key:"showLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;Swal({title:"Now loading",allowEscapeKey:!1,allowOutsideClick:!1,timer:e,onOpen:function(){Swal.showLoading()}}).then(function(){},function(e){"timer"===e&&(console.log("closed by timer!!!!"),Swal({title:"Finished!",type:"success",timer:2e3,showConfirmButton:!1}))})}},{key:"confirm",value:function(e,t,n){Swal.fire({title:e,html:t,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(function(e){e.value?n():e.dismiss===Swal.DismissReason.cancel&&Swal.fire("Cancelled","Your imaginary file is safe :)","error")})}},{key:"confirm2",value:function(e,t,n,r){Swal.fire({title:e,html:t,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(function(e){e.value?n():e.dismiss===Swal.DismissReason.cancel&&r()})}},{key:"valid",value:function(e,t){return new Promise(function(n,r){Swal.fire({title:e,text:t,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(function(e){e.value?n(!0):e.dismiss===Swal.DismissReason.cancel&&r(!1)})})}},{key:"validation",value:function(e,t){Swal.fire(e,t,"warning")}},{key:"success",value:function(e,t){t?Swal.fire("Successfully!",e,"success"):this.Toast.fire({icon:"success",title:e})}},{key:"error",value:function(e,t){t?Swal.fire("Error!",e,"error"):this.Toast.fire({icon:"error",title:e})}},{key:"warning",value:function(e,t){t?Swal.fire("Warning!",e,"warning"):this.Toast.fire({icon:"warning",title:e})}},{key:"message",value:function(e,t){t?Swal.fire("Info!",e,"info"):this.Toast.fire({icon:"info",title:e})}},{key:"delete",value:function(e,t){return new Promise(function(n,r){Swal.fire({title:e,text:t,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(function(e){e.value?n(!0):e.dismiss===Swal.DismissReason.cancel&&r(!1)})})}}]),e}()).\u0275fac=function(e){return new(e||S)},S.\u0275prov=u.Jb({token:S,factory:S.\u0275fac,providedIn:"root"}),S),A=a("z4EA"),C=((w=function(){function e(t,r,i,a){n(this,e),this.http=t,this.router=r,this.alertify=i,this.cookieService=a,this.baseUrl=m.apiUrl+"auth/login",this.jwtHelper=new U.a,this.roleValue=new f.a({id:0,name:""}),this.buildingValue=new f.a([{}]),this.levelSource=new f.a({}),this.currentLevel=this.levelSource.asObservable()}return i(e,[{key:"login",value:function(e){var t=this;return this.http.post(this.baseUrl,e).pipe(Object(E.a)(function(e){var n=e;n&&(localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user)),localStorage.setItem("avatar",n.user.User.image),t.decodedToken=t.jwtHelper.decodeToken(n.token),t.currentUser=n.user.User,t.getBuildingUserByUserID(n.user.User.ID).subscribe(function(e){localStorage.setItem("building",JSON.stringify(e.data)),t.setBuildingValue(e.data)}))}))}},{key:"getBuildingUserByUserID",value:function(e){return this.http.get("".concat(m.apiUrlEC,"BuildingUser/GetBuildingUserByUserID/").concat(e),{})}},{key:"loggedIn",value:function(){var e=localStorage.getItem("token");return!this.jwtHelper.isTokenExpired(e)}},{key:"logOut",value:function(){this.cookieService.deleteAll(),localStorage.clear(),this.decodedToken=null,this.currentUser=null,this.buildingValue=null,this.roleValue=null,this.router.navigate(["login"])}},{key:"logOutAuth",value:function(){this.cookieService.deleteAll(),localStorage.clear(),this.decodedToken=null,this.currentUser=null,this.buildingValue=null,this.roleValue=null,this.router.navigate(["login"]),location.reload()}},{key:"roleMatch",value:function(e){var t=!1,n=this.decodedToken.role;return e.forEach(function(e){n.includes(e)&&(t=!0)}),t}},{key:"setBuildingValue",value:function(e){this.buildingValue.next(e)}},{key:"getBuildingValue",value:function(){return this.buildingValue.asObservable()}},{key:"setRoleValue",value:function(e){this.roleValue.next(e)}},{key:"getRoleValue",value:function(){return this.roleValue.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||w)(u.ac(v.b),u.ac(g.c),u.ac(x),u.ac(A.a))},w.\u0275prov=u.Jb({token:w,factory:w.\u0275fac,providedIn:"root"}),w),M=((k=function(){function e(){n(this,e)}return i(e,[{key:"monthComparator",value:function(e,t){var n=new Date(e),r=new Date(t);return n.getMonth()===r.getMonth()?1:-1}},{key:"addDays",value:function(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n}},{key:"getMondaysInMonth",value:function(e){var t=e-1||(new Date).getMonth();1===e&&(t=0);var n=new Date((new Date).getFullYear(),t),r=n.getMonth(),i=[];for(n.setDate(1);1!==n.getDay();)n.setDate(n.getDate()+1);for(;n.getMonth()===r;)i.push(new Date(n.getTime())),n.setDate(n.getDate()+7);return this.toFormatDatesArray(i)}},{key:"getWednesdaysInMonth",value:function(e){var t=this,n=[];return this.getMondaysInMonth(e).map(function(e){var r=t.addDays(e,1);1===t.monthComparator(e,r)&&n.push(r)}),this.toFormatDatesArray(n)}},{key:"getTuesdaysInMonth",value:function(e){var t=this,n=[];return this.getMondaysInMonth(e).map(function(e){var r=t.addDays(e,2);1===t.monthComparator(e,r)&&n.push(r)}),this.toFormatDatesArray(n)}},{key:"getThursdaysInMonth",value:function(e){var t=this,n=[];return this.getMondaysInMonth(e).map(function(e){var r=t.addDays(e,3);1===t.monthComparator(e,r)&&n.push(r)}),this.toFormatDatesArray(n)}},{key:"getFridaysInMonth",value:function(e){var t=this,n=[];return this.getMondaysInMonth(e).map(function(e){var r=t.addDays(e,4);1===t.monthComparator(e,r)&&n.push(r)}),this.toFormatDatesArray(n)}},{key:"getSaturdaysInMonth",value:function(e){var t=this,n=[];return this.getMondaysInMonth(e).map(function(e){var r=t.addDays(e,5);1===t.monthComparator(e,r)&&n.push(r)}),this.toFormatDatesArray(n)}},{key:"getSundaysInMonth",value:function(e){var t=this,n=[];return this.getMondaysInMonth(e).map(function(e){var r=t.addDays(e,6);1===t.monthComparator(e,r)&&n.push(r)}),n}},{key:"getDatesOfMonth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e?"#N/A":e+["#N/A","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Nighth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","NineTeenth","Twentieth","Twenty-first","Twenty-second","Twenty-third","Twenty-fourth","Twenty-fifth","Twenty-sixth","Twenty-seventh","Twenty-eight","Twenty-nineth","Thirtieth","Thirty-first"].map(function(e){return e.substring(e.length-2,e.length)})[e]}},{key:"getFirstDateByMonth",value:function(e){var t=new Date((new Date).getFullYear(),e);return new Date(t.getFullYear(),t.getMonth(),1).toLocaleString()}},{key:"getLastDateByMonth",value:function(e){var t=new Date((new Date).getFullYear(),e);return new Date(t.getFullYear(),t.getMonth()+1,0)}},{key:"checkQuarterly",value:function(e,t){var n=["First quarter","Second quarter","Third quarter","Fourth quarter"],r=n.map(function(e){return e.substr(0,3)}).indexOf(e);if(""===t)return{status:!1,quarter:n[r]};var i=new Date(t),a=i.getMonth()+1,o=i.getDate();if([1,2,3,4].includes(a)&&0===r){if(4===a&&1===o)return{status:!0,quarter:n[r]};if(a>=1&&a<=3)return{status:!0,quarter:n[r]}}if([4,5,6,7].includes(a)&&1===r){if(7===a&&1===o)return{status:!0,quarter:n[r]};if(a>=4&&a<=6)return{status:!0,quarter:n[r]}}if([7,8,9,10].includes(a)&&2===r){if(10===a&&1===o)return{status:!0,quarter:n[r]};if(a>=7&&a<=9)return{status:!0,quarter:n[r]}}return[10,11,12].includes(a)&&3===r?{status:!0,quarter:n[r]}:{status:!1,quarter:n[r]}}},{key:"toFormatDatesArray",value:function(e){var t=this;return e.map(function(e){return t.toFormatDate(e,!0)})}},{key:"toFormatDate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(""===(e||""))return"";var n=new Date(e),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=n.getDate(),a=n.getMonth(),o=n.getFullYear();return t?"".concat(i," ").concat(r[a],", ").concat(o):"".concat(i," ").concat(r[a])}},{key:"getFirstDateLastDateQuarter",value:function(e){switch(e){case 1:return{firstDate:this.toFormatDate(this.getFirstDateByMonth(1)),lastDate:this.toFormatDate(this.getFirstDateByMonth(3))};case 2:return{firstDate:this.toFormatDate(this.getFirstDateByMonth(4)),lastDate:this.toFormatDate(this.getFirstDateByMonth(6))};case 3:return{firstDate:this.toFormatDate(this.getFirstDateByMonth(7)),lastDate:this.toFormatDate(this.getFirstDateByMonth(9))};case 4:return{firstDate:this.toFormatDate(this.getFirstDateByMonth(10)),lastDate:this.toFormatDate(this.getFirstDateByMonth(12))}}}},{key:"getQuarter",value:function(e){return e=e||new Date,[1,2,3].includes(e.getMonth())?1:[4,5,6].includes(e.getMonth())?2:[7,8,9].includes(e.getMonth())?3:[10,11,12].includes(e.getMonth())?4:void 0}},{key:"getDateInMonth",value:function(e){return new Date((new Date).getFullYear(),e,0).getDate()}},{key:"toDateTimeNowISO",value:function(){var e=new Date;return e.toISOString(),e}},{key:"toTitleCase",value:function(e){return e.replace(/\S+/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}},{key:"convertDate",value:function(e){function t(e){return e<10?"0"+e:e}var n=new Date(e);return[t(n.getDate()),t(n.getMonth()+1),n.getFullYear()].join("/")}},{key:"dateNow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";function t(e){return e<10?"0"+e:e}var n=new Date,r=n.getDate(),i=n.getMonth()+1,a=n.getFullYear();return t(i)+e+t(r)+e+a}},{key:"dateFormat",value:function(e){var t,n,r=new Date(e);return(t=r.getMonth()+1)<10&&(n="0"+t),n+"-"+(r.getDate()<10?"0"+r.getDate():r.getDate())+"-"+r.getFullYear()}},{key:"JSONDateWithTime",value:function(e){var t,n,r,i=new Date(e);r=(t=i.getMonth()+1)<10?"0"+t:t,n=i.getDate()<10?"0"+i.getDate():i.getDate();var a=i.getFullYear(),o="".concat(n,"/").concat(r,"/").concat(a),s=i.getHours()<10?"0"+i.getHours():i.getHours(),u=i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes(),c=i.getSeconds();o=s+":"+u+" - "+o;var l,h=new Date,d=h.getDate(),g=h.getMonth()+1,b=h.getFullYear(),p=h.getHours(),f=h.getMinutes(),v=h.getSeconds();return l=o,p-s==0&&f-u==0&&b-a==0&&g-r==0&&d-n==0&&(l=v-c==0?"just recently":v-c==1?v-c+" second ago":v-c+" seconds ago"),p-s==0&&f-u>0&&b-a==0&&g-r==0&&d-n==0&&(l=f-u==1?f-u+" minute ago":f-u+" minutes ago"),p-s>0&&b-a==0&&g-r==0&&d-n==0&&(l=p-s==1?p-s+" hour ago":p-s+" hours ago"),b-a==0&&g-r==0&&d-n>0&&d-n<=7&&(l=d-n==1?d-n+" day ago":d-n+" days ago"),b-a==0&&g!==r&&0<(n=30*(g-r)+(n=d-n))&&n<=7&&(l=n+" days ago"),l}}]),e}()).\u0275fac=function(e){return new(e||k)},k.\u0275prov=u.Jb({token:k,factory:k.\u0275fac,providedIn:"root"}),k),I=a("wd/R"),R=((O=function(){function t(e){n(this,t),this.http=e,this.baseUrl=m.apiUrlEC,this.messageSource=new f.a(0),this.currentMessage=this.messageSource.asObservable()}return i(t,[{key:"changeMessage",value:function(e){this.messageSource.next(e)}},{key:"getAll",value:function(){return this.http.get("".concat(this.baseUrl,"Role/GetAll"))}},{key:"mappingUserRole",value:function(e){return this.http.post("".concat(this.baseUrl,"UserRole/MappingUserRole"),e)}},{key:"mapUserRole",value:function(e,t){return this.http.put("".concat(this.baseUrl,"UserRole/MapUserRole/").concat(e,"/").concat(t),{})}},{key:"lock",value:function(e){return this.http.put("".concat(this.baseUrl,"UserRole/Lock"),e)}},{key:"isLock",value:function(e){return this.http.put("".concat(this.baseUrl,"UserRole/IsLock"),e)}},{key:"getRoleByUserID",value:function(e){return this.http.get("".concat(this.baseUrl,"UserRole/GetRoleByUserID/").concat(e))}},{key:"create",value:function(e){return this.http.post(this.baseUrl+"Role/Create",e)}},{key:"update",value:function(e){return this.http.put(this.baseUrl+"Role/Update",e)}},{key:"delete",value:function(e){return this.http.delete(this.baseUrl+"Role/Delete/"+e)}},{key:"getScreenFunctionAndAction",value:function(t){return this.http.post("".concat(this.baseUrl,"Permission/GetScreenFunctionAndAction"),{roleIDs:t}).pipe(Object(E.a)(function(t){var n,r=t,i=e(r);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=[],u=e(o.fields.dataSource);try{for(u.s();!(a=u.n()).done;){var c,l=a.value,h=e(l.childrens);try{for(h.s();!(c=h.n()).done;){var d=c.value;d.isChecked=d.status,d.status&&s.push(d.id)}}catch(b){h.e(b)}finally{h.f()}var g=l.childrens.every(function(e){return!0===e.status});g&&(s.push(l.id),l.isChecked=g)}}catch(b){u.e(b)}finally{u.f()}}}catch(b){i.e(b)}finally{i.f()}return r}))}}]),t}()).\u0275fac=function(e){return new(e||O)(u.ac(v.b))},O.\u0275prov=u.Jb({token:O,factory:O.\u0275fac,providedIn:"root"}),O),B=((T=function(){function e(){n(this,e),this.messageSource=new f.a(0),this.SourceLang=new f.a("en"),this.currentMessage=this.messageSource.asObservable(),this.currentSourceLang=this.SourceLang.asObservable(),this.messageSources=new f.a(0),this.currentMessages=this.messageSources.asObservable(),this.info=new f.a(!1),this.locale=new f.a(null)}return i(e,[{key:"changeMessage",value:function(e){this.messageSource.next(e)}},{key:"changeMessages",value:function(e){this.messageSources.next(e)}},{key:"changeLang",value:function(e){this.SourceLang.next(e)}},{key:"setValue",value:function(e){this.info.next(e)}},{key:"getValue",value:function(){return this.info.asObservable()}},{key:"setValueLocale",value:function(e){this.locale.next(e)}},{key:"getValueLocale",value:function(){return this.locale.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||T)},T.\u0275prov=u.Jb({token:T,factory:T.\u0275fac,providedIn:"root"}),T),V=[{name:"Dashboard",url:"/dashboard",icon:"icon-speedometer",badge:{variant:"info",text:"NEW"}},{name:"0.System",url:"/system",icon:"icon-puzzle",children:[{name:"Account Group",url:"/system/account-group",icon:"icon-puzzle"},{name:"Account",url:"/system/account",icon:"icon-puzzle"},{name:"Progress",url:"/system/progress",icon:"icon-puzzle"},{name:"Period",url:"/system/period",icon:"icon-puzzle"},{name:"Account Group Period",url:"/system/account-group-period",icon:"icon-puzzle"},{name:"OC",url:"/system/oc",icon:"icon-puzzle"},{name:"OC User",url:"/system/oc-user",icon:"icon-puzzle"}]},{name:"1.Maintain",url:"/maintain",icon:"icon-bell",children:[{name:"Mailing",url:"/maintain/mailing",icon:"icon-bell"}]},{name:"2.Transaction",url:"/transaction",icon:"icon-cursor",children:[{name:"2.1 KPI Objective",url:"/transaction/objective",icon:"icon-cursor"},{name:"2.2 To Do List",url:"/transaction/todolist",icon:"icon-cursor"}]},{name:"3.Kanban",url:"/kanban",icon:"icon-star",children:[]},{name:"4.Report",url:"/report",icon:"icon-calculator",children:[]}],L=a("LRne"),z=a("nYR2"),F=a("JIr8"),N=a("3E0/"),J=a("vkgz"),P=((j=function(){function e(t,r){n(this,e),this.http=t,this.cookieService=r,this.baseUrl=m.apiUrl+"auth/login",this.jwtHelper=new U.a,this.roleValue=new f.a({id:0,name:""}),this.buildingValue=new f.a([{}]),this.levelSource=new f.a({}),this.currentLevel=this.levelSource.asObservable(),this.apiUrl="".concat(m.apiUrl,"auth"),this._user=new f.a(null),this.user$=this._user.asObservable(),this._function=new f.a(null),this.function$=this._function.asObservable(),this.functionsValue=new f.a({}),window.addEventListener("storage",this.storageEventListener.bind(this))}return i(e,[{key:"storageEventListener",value:function(e){localStorage}},{key:"ngOnDestroy",value:function(){window.removeEventListener("storage",this.storageEventListener.bind(this))}},{key:"login",value:function(e,t){var n=this;return this.http.post("".concat(this.apiUrl,"/login"),{username:e,password:t}).pipe(Object(E.a)(function(e){var t=e,r=e.user;return localStorage.setItem("user",JSON.stringify(r)),n._user.next(t),n.currentUser=r,t}))}},{key:"logout",value:function(){var e=this;this.http.post("".concat(this.apiUrl,"/logout"),{}).pipe(Object(z.a)(function(){e.clearLocalStorage(),e._user.next(null),e.setBuildingValue(null),e.setRoleValue(null),e._user.next(null),e.stopTokenTimer()})).subscribe()}},{key:"refreshToken",value:function(){var e=this,t=localStorage.getItem("refresh_token");return t&&t!==void 0+""?this.http.post("".concat(this.apiUrl,"/refresh-token"),{refreshToken:t}).pipe(Object(F.a)(function(){return Object(L.a)([])}),Object(E.a)(function(t){return e._user.next(t),e.setLocalStorage(t),e.startTokenTimer(),t})):(this.clearLocalStorage(),Object(L.a)(null))}},{key:"setLocalStorage",value:function(e){localStorage.setItem("login-event","login"+Math.random())}},{key:"clearLocalStorage",value:function(){localStorage.clear(),localStorage.setItem("logout-event","logout"+Math.random())}},{key:"getTokenRemainingTime",value:function(){var e=localStorage.getItem("token");if(!e)return 0;var t=JSON.parse(atob(e.split(".")[1]));return new Date(1e3*t.exp).getTime()-Date.now()}},{key:"startTokenTimer",value:function(){var e=this,t=this.getTokenRemainingTime();this.timer=Object(L.a)(!0).pipe(Object(N.a)(t),Object(J.a)(function(){return e.refreshToken().subscribe()})).subscribe()}},{key:"stopTokenTimer",value:function(){var e;null===(e=this.timer)||void 0===e||e.unsubscribe()}},{key:"loggedIn",value:function(){var e=localStorage.getItem("token");return!this.jwtHelper.isTokenExpired(e)}},{key:"logOut",value:function(){this.cookieService.deleteAll(),localStorage.clear(),this.decodedToken=null,this.currentUser=null,this.functionsValue.next({}),this._user.next({}),this.buildingValue.next([{}]),this.roleValue.next({})}},{key:"roleMatch",value:function(e){var t=!1,n=this.decodedToken.role;return e.forEach(function(e){n.includes(e)&&(t=!0)}),t}},{key:"setBuildingValue",value:function(e){this.buildingValue.next(e)}},{key:"getBuildingValue",value:function(){return this.buildingValue.asObservable()}},{key:"setRoleValue",value:function(e){this.roleValue.next(e)}},{key:"getRoleValue",value:function(){return this.roleValue.asObservable()}},{key:"setFunctions",value:function(e){this.functionsValue.next(e)}},{key:"getFunctionsValue",value:function(){return this.functionsValue.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||j)(u.ac(v.b),u.ac(A.a))},j.\u0275prov=u.Jb({token:j,factory:j.\u0275fac,providedIn:"root"}),j),G=a("emFE"),H=a("H552"),Y=a("7g+E"),q=a("G0yt"),_=a("Iluq"),Q=a("PDtH"),W=a("10VE"),X=a("s7LF"),K=["ingredientinfoGrid"];function Z(e,t){if(1&e&&(u.Tb(0,"div"),u.Tb(1,"div",53),u.Tb(2,"h1"),u.Ec(3),u.hc(4,"date"),u.Sb(),u.Ob(5,"div",54),u.Tb(6,"p"),u.Tb(7,"label",55),u.Ec(8,"Upload by:"),u.Sb(),u.Ec(9),u.Sb(),u.Sb(),u.Sb()),2&e){var n=t.$implicit;u.Ab(3),u.Hc("",n.name," (",u.jc(4,4,n.upatedTime,"YYYY-MM-dd HH:mm"),")"),u.Ab(2),u.mc("innerHTML",n.description,u.yc),u.Ab(4),u.Gc(" ",n.uploadBy,"")}}function $(e,t){if(1&e&&(u.Tb(0,"div",47),u.Tb(1,"h4",48),u.Ec(2," Version History "),u.Sb(),u.Tb(3,"button",49),u.dc("click",function(){return t.$implicit.dismiss("Cross click")}),u.Tb(4,"span",50),u.Ec(5,"\xd7"),u.Sb(),u.Sb(),u.Sb(),u.Tb(6,"div",51),u.Tb(7,"div",30),u.Tb(8,"div",31),u.Cc(9,Z,10,7,"div",52),u.Sb(),u.Sb(),u.Sb()),2&e){var n=u.gc();u.Ab(9),u.mc("ngForOf",n.data)}}var ee,te,ne,re=function(){return["/"]},ie=function(){return{src:"assets/img/logo.png",width:50,height:25,alt:"Logo"}},ae=function(){return{src:"assets/img/logo.png",width:25,height:25,alt:"Logo"}},oe=((ne=function(){function e(t,r,i,a,o,s,u,c,l,h,d,g){var b=this;n(this,e),this.authService=t,this.authenticationService=r,this.roleService=i,this.alertify=a,this.calendarsService=o,this.sanitizer=s,this.router=u,this.dataService=c,this.ocService=l,this.spinner=h,this.cookieService=d,this.modalService=g,this.sidebarMinimized=!1,this.navItems=V,this.fields={text:"name",value:"id"},this.toolbarOptions=["Search","ExcelExport"],this.pageSettings={pageCount:100,pageSizes:[50,100,200,"All"],pageSize:100},this.filterSettings={type:"Excel"},this.fieldsBuildings={text:"name",value:"id"},this.buildingID=0,this.onFilteringBuilding=function(e){var t=new H.e;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(b.buildings,t)}}return i(e,[{key:"toggleMinimize",value:function(e){this.sidebarMinimized=e}},{key:"ngOnInit",value:function(){var e=this;this.getAllGroup(),this.endDate=new Date,this.startDate=new Date,this.searchOptions={fields:["guestID","cardNo","guestName","department","eventDescription","verificationSource"],operator:"contains",ignoreCase:!0},this.page=1,this.pageSize=20,this.currentTime=I().format("hh:mm:ss A"),setInterval(function(){return e.updateCurrentTime()},1e3)}},{key:"createdSearch",value:function(e){var t=this.grid.element,n=document.createElement("span");n.className="e-clear-icon",n.id=t.id+"clear",n.onclick=this.cancelBtnClick.bind(this),t.querySelector(".e-toolbar-item .e-input-group").appendChild(n)}},{key:"cancelBtnClick",value:function(e){this.grid.searchSettings.key="",this.grid.element.querySelector(".e-input-group.e-search .e-input").value=""}},{key:"ngAfterViewInit",value:function(){}},{key:"getResultByGroup",value:function(){var e=this;this.ocService.getResultByGroup(this.buildingID,this.startDate.toDateString(),this.endDate.toDateString()).subscribe(function(t){e.data=t.filter(function(e){return"Unregistered Guest"!==e.eventDescription&&"Unauthorized Guest"!==e.eventDescription&&"\u7528\u6236\u672a\u8a3b\u518a"!==e.eventDescription}),e.spinner.hide()})}},{key:"getAllGroup",value:function(){var e=this;this.ocService.getAllGroup().subscribe(function(t){e.buildings=t,e.spinner.hide()})}},{key:"startDateOnchange",value:function(e){this.spinner.show(),this.startDate=e.value,0===this.buildingID?(this.alertify.error("Please select department !"),this.spinner.hide()):this.getResultByGroup()}},{key:"endDateOnchange",value:function(e){this.spinner.show(),this.endDate=e.value,this.getResultByGroup()}},{key:"onClickDefault",value:function(){this.spinner.show(),this.startDate=new Date,this.endDate=new Date,this.getResultByGroup()}},{key:"onChangeBuilding",value:function(e){this.spinner.show(),this.buildingID=e.itemData.id,this.getResultByGroup()}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}},{key:"dataBound",value:function(){this.grid.autoFitColumns()}},{key:"getBuilding",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user")).user.id;this.roleService.getRoleByUserID(t).subscribe(function(t){(t=t||{})!=={}&&(e.level=t.id)})}},{key:"updateCurrentTime",value:function(){this.currentTime=I().format("hh:mm:ss A")}},{key:"logout",value:function(){this.cookieService.deleteAll(),localStorage.clear(),this.authService.decodedToken=null,this.authService.currentUser=null,this.authenticationService.logOut(),this.router.navigate(["login"],{queryParams:{uri:this.router.url},replaceUrl:!0}),this.alertify.message("Logged out")}},{key:"defaultImage",value:function(){return this.sanitizer.bypassSecurityTrustResourceUrl("data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAJYAA\n      ACWBAMAAADOL2zRAAAAG1BMVEVsdX3////Hy86jqK1+ho2Ql521ur7a3N7s7e5Yhi\n      PTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABAElEQVRoge3SMW+DMBiE4YsxJqMJtH\n      OTITPeOsLQnaodGImEUMZEkZhRUqn92f0MaTubtfeMh/QGHANEREREREREREREtIJ\n      J0xbH299kp8l8FaGtLdTQ19HjofxZlJ0m1+eBKZcikd9PWtXC5DoDotRO04B9YOvF\n      IXmXLy2jEbiqE6Df7DTleA5socLqvEFVxtJyrpZFWz/pHM2CVte0lS8g2eDe6prOy\n      qPglhzROL+Xye4tmT4WvRcQ2/m81p+/rdguOi8Hc5L/8Qk4vhZzy08DduGt9eVQyP\n      2qoTM1zi0/uf4hvBWf5c77e69Gf798y08L7j0RERERERERERH9P99ZpSVRivB/rgAAAABJRU5ErkJggg==")}},{key:"getAvatar",value:function(){var e=localStorage.getItem("avatar");this.avatar="null"===e?this.defaultImage():this.sanitizer.bypassSecurityTrustResourceUrl("data:image/png;base64, "+e)}},{key:"imageBase64",value:function(e){return"null"===e?this.defaultImage():this.sanitizer.bypassSecurityTrustResourceUrl("data:image/png;base64, "+e)}},{key:"datetime",value:function(e){return this.calendarsService.JSONDateWithTime(e)}},{key:"openModal",value:function(e){this.modalReference=this.modalService.open(e,{size:"xl",backdrop:"static",keyboard:!1})}}]),e}()).\u0275fac=function(e){return new(e||ne)(u.Nb(C),u.Nb(P),u.Nb(R),u.Nb(x),u.Nb(M),u.Nb(s.b),u.Nb(g.c),u.Nb(B),u.Nb(D),u.Nb(Y.c),u.Nb(A.a),u.Nb(q.a))},ne.\u0275cmp=u.Hb({type:ne,selectors:[["app-dashboard"]],viewQuery:function(e,t){var n;1&e&&u.Ic(K,1),2&e&&u.tc(n=u.ec())&&(t.grid=n.first)},decls:71,vars:33,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[3,"navbarBrandRouterLink","fixed","navbarBrandFull","navbarBrandMinimized","sidebarToggler","asideMenuToggler","mobileAsideMenuToggler"],[1,"nav","navbar-nav","nav-link-dark","d-md-down-none"],[1,"nav-item"],["href","/",1,"nav-link","font-2xl"],[1,"nav","navbar-nav","ml-auto","p-0"],[1,"nav-item","d-md-down-none","mr-2",2,"width","70px"],[1,"nav-link"],[1,"nav-item","d-md-down-none","mr-2"],[1,"font-weight-bold","text-info"],[1,"nav-item","dropdown",2,"cursor","pointer"],["data-toggle","dropdown",1,"nav-link","font-weight-bold"],[1,"dropdown-menu","dropdown-menu-right"],[1,"dropdown-item",3,"click"],[1,"fa","fa-lock"],[1,"app-body"],[1,"main"],[1,"container-fluid"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-md-12","d-flex","justify-content-center","align-items-center"],[1,"font-weight-bold","pr-3"],[3,"dataSource","fields","allowFiltering","value","placeholder","filtering","change"],["ddlelement",""],[1,"font-weight-bold","pr-3",2,"color","transparent"],["type","button",1,"btn","bg-teal",3,"click"],[1,"fa","fa-refresh"],[1,"font-weight-bold","px-3"],[1,"pr-3",3,"value","ngModel","change","ngModelChange"],[1,"row"],[1,"col-md-12"],["id","grid","allowResizing","true","allowFiltering","true","showColumnMenu","true","allowPaging","true","gridLines","Both",3,"dataSource","allowExcelExport","allowSorting","filterSettings","toolbar","pageSettings","searchSettings","dataBound","created","toolbarClick"],["ingredientinfoGrid",""],["field","guestID","textAlign","Center","headerText","EmployeeID","width","150"],["field","guestName","textAlign","Center","headerText","GuestName","width","120"],["field","department","textAlign","Center","headerText","Department","width","100"],["field","date","textAlign","Center","headerText","Date","width","130"],["field","time","textAlign","Center","headerText","Time","width","130"],["field","entryDoor","textAlign","Center","headerText","EntryDoor","width","100"],["field","eventDescription","textAlign","Center","headerText","EventDescription"],["field","verificationSource","textAlign","Center","headerText","VerificationSource"],["href","/"],[1,"ml-auto","mr-2"],["target","_blank","href","http://10.4.5.174:93"],[1,"fa","fa-users"],["versionHistoryModal",""],[1,"modal-header"],[1,"modal-title","ml-1"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngFor","ngForOf"],[1,"callout","callout-info"],[3,"innerHTML"],["for","Name"]],template:function(e,t){1&e&&(u.Ob(0,"ngx-spinner",0),u.Tb(1,"app-header",1),u.Tb(2,"ul",2),u.Tb(3,"li",3),u.Tb(4,"a",4),u.Ec(5,"Chiyu"),u.Sb(),u.Sb(),u.Sb(),u.Tb(6,"ul",5),u.Tb(7,"li",6),u.Ob(8,"div",7),u.Sb(),u.Tb(9,"li",8),u.Tb(10,"a",7),u.Tb(11,"h4",9),u.Ec(12),u.Sb(),u.Sb(),u.Sb(),u.Tb(13,"li",10),u.Tb(14,"a",11),u.Ec(15),u.hc(16,"titlecase"),u.Sb(),u.Tb(17,"div",12),u.Tb(18,"a",13),u.dc("click",function(){return t.logout()}),u.Ob(19,"i",14),u.Ec(20," Sign-out "),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Tb(21,"div",15),u.Tb(22,"main",16),u.Ob(23,"cui-breadcrumb"),u.Tb(24,"div",17),u.Tb(25,"div",18),u.Tb(26,"div",19),u.Tb(27,"div",20),u.Tb(28,"div",21),u.Tb(29,"div",22),u.Ec(30,"Department:"),u.Sb(),u.Tb(31,"ejs-dropdownlist",23,24),u.dc("filtering",function(e){return t.onFilteringBuilding(e)})("change",function(e){return t.onChangeBuilding(e)}),u.Sb(),u.Tb(33,"div",25),u.Ec(34,"|"),u.Sb(),u.Tb(35,"button",26),u.dc("click",function(){return t.onClickDefault()}),u.Ob(36,"i",27),u.Ec(37," Refresh "),u.Sb(),u.Tb(38,"div",28),u.Ec(39,"Start Time:"),u.Sb(),u.Tb(40,"ejs-datepicker",29),u.dc("change",function(e){return t.startDateOnchange(e)})("ngModelChange",function(e){return t.startDate=e}),u.Sb(),u.Tb(41,"div",22),u.Ec(42,"End Time:"),u.Sb(),u.Tb(43,"ejs-datepicker",29),u.dc("change",function(e){return t.endDateOnchange(e)})("ngModelChange",function(e){return t.endDate=e}),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Tb(44,"div",19),u.Tb(45,"div",30),u.Tb(46,"div",31),u.Tb(47,"ejs-grid",32,33),u.dc("dataBound",function(){return t.dataBound()})("created",function(e){return t.createdSearch(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),u.Tb(49,"e-columns"),u.Ob(50,"e-column",34),u.Ob(51,"e-column",35),u.Ob(52,"e-column",36),u.Ob(53,"e-column",37),u.Ob(54,"e-column",38),u.Ob(55,"e-column",39),u.Ob(56,"e-column",40),u.Ob(57,"e-column",41),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Tb(58,"app-footer"),u.Tb(59,"span"),u.Tb(60,"a",42),u.Ec(61,"Copyright \xa9 2021 SHYANG HUNG CHENG INDUSTRIAL CO., LTD All "),u.Sb(),u.Ec(62," \xa9 Right reserved."),u.Sb(),u.Tb(63,"span",43),u.Ec(64,"Powered by "),u.Tb(65,"a",44),u.Ec(66,"Lab-team"),u.Sb(),u.Sb(),u.Ob(67,"i",45),u.Ec(68),u.Sb(),u.Cc(69,$,10,1,"ng-template",null,46,u.Dc)),2&e&&(u.mc("fullScreen",!0),u.Ab(1),u.mc("navbarBrandRouterLink",u.pc(30,re))("fixed",!0)("navbarBrandFull",u.pc(31,ie))("navbarBrandMinimized",u.pc(32,ae))("sidebarToggler","lg")("asideMenuToggler","lg")("asideMenuToggler",!1)("mobileAsideMenuToggler",!1),u.Ab(11),u.Fc(t.currentTime),u.Ab(3),u.Gc(" ",u.ic(16,28,t.userName)," "),u.Ab(16),u.nc("placeholder","Select a department"),u.mc("dataSource",t.buildings)("fields",t.fieldsBuildings)("allowFiltering",!0)("value",t.buildingID),u.Ab(9),u.mc("value",t.startDate)("ngModel",t.startDate),u.Ab(3),u.mc("value",t.endDate)("ngModel",t.endDate),u.Ab(4),u.mc("dataSource",t.data)("allowExcelExport",!0)("allowSorting",!0)("filterSettings",t.filterSettings)("toolbar",t.toolbarOptions)("pageSettings",t.pageSettings)("searchSettings",t.searchOptions),u.Ab(21),u.Gc(" ",t.online,"\n"))},directives:[Y.a,_.e,_.h,Q.b,W.a,X.e,X.h,G.f,G.d,G.b,G.c,G.a,_.c,c.l],pipes:[c.u,c.e],styles:[".app-header[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{display:inline-flex!important;align-items:center!important;justify-content:center!important;width:155px!important;padding:0!important;margin-right:0!important;background-color:transparent!important}.e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}"]}),ne),se=((te=function e(){n(this,e)}).\u0275fac=function(e){return new(e||te)},te.\u0275cmp=u.Hb({type:te,selectors:[["ng-component"]],decls:19,vars:0,consts:[[1,"app","flex-row","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"clearfix"],[1,"float-left","display-3","mr-4"],[1,"pt-3"],[1,"text-muted"],[1,"input-prepend","input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["id","prependedInput","size","16","type","text","placeholder","What are you looking for?",1,"form-control"],[1,"input-group-append"],["type","button",1,"btn","btn-info"]],template:function(e,t){1&e&&(u.Tb(0,"div",0),u.Tb(1,"div",1),u.Tb(2,"div",2),u.Tb(3,"div",3),u.Tb(4,"div",4),u.Tb(5,"h1",5),u.Ec(6,"404"),u.Sb(),u.Tb(7,"h4",6),u.Ec(8,"Oops! You're lost."),u.Sb(),u.Tb(9,"p",7),u.Ec(10,"The page you are looking for was not found."),u.Sb(),u.Sb(),u.Tb(11,"div",8),u.Tb(12,"div",9),u.Tb(13,"span",10),u.Ob(14,"i",11),u.Sb(),u.Sb(),u.Ob(15,"input",12),u.Tb(16,"span",13),u.Tb(17,"button",14),u.Ec(18,"Search"),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb())},encapsulation:2}),te),ue=((ee=function e(){n(this,e)}).\u0275fac=function(e){return new(e||ee)},ee.\u0275cmp=u.Hb({type:ee,selectors:[["ng-component"]],decls:19,vars:0,consts:[[1,"app","flex-row","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"clearfix"],[1,"float-left","display-3","mr-4"],[1,"pt-3"],[1,"text-muted"],[1,"input-prepend","input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["id","prependedInput","size","16","type","text","placeholder","What are you looking for?",1,"form-control"],[1,"input-group-append"],["type","button",1,"btn","btn-info"]],template:function(e,t){1&e&&(u.Tb(0,"div",0),u.Tb(1,"div",1),u.Tb(2,"div",2),u.Tb(3,"div",3),u.Tb(4,"div",4),u.Tb(5,"h1",5),u.Ec(6,"500"),u.Sb(),u.Tb(7,"h4",6),u.Ec(8,"Houston, we have a problem!"),u.Sb(),u.Tb(9,"p",7),u.Ec(10,"The page you are looking for is temporarily unavailable."),u.Sb(),u.Sb(),u.Tb(11,"div",8),u.Tb(12,"div",9),u.Tb(13,"span",10),u.Ob(14,"i",11),u.Sb(),u.Sb(),u.Ob(15,"input",12),u.Tb(16,"span",13),u.Tb(17,"button",14),u.Ec(18,"Search"),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb())},encapsulation:2}),ee),ce=a("mrSG");function le(e,t){1&e&&(u.Tb(0,"div",25),u.Ec(1," Login failed. Please try again. "),u.Sb())}var he,de,ge,be,pe,fe,ve,me,ye,Se,ke=[{path:"",pathMatch:"full",component:oe},{path:"404",component:se,data:{title:"Page 404"}},{path:"500",component:ue,data:{title:"Page 500"}},{path:"login",component:(de=function(){function e(t,r,i,a,o,s,u){n(this,e),this.route=t,this.router=r,this.authService=i,this.roleService=a,this.spinner=o,this.cookieService=s,this.alertifyService=u,this.busy=!1,this.username="",this.password="",this.loginError=!1,this.user={username:"",password:"",systemCode:m.systemCode},this.remember=!1,void 0!==this.cookieService.get("remember")&&"Yes"===this.cookieService.get("remember")&&(this.user={username:this.cookieService.get("username"),password:this.cookieService.get("password"),systemCode:m.systemCode},this.username=this.cookieService.get("username"),this.password=this.cookieService.get("password"),this.remember=!0,this.login()),this.uri=this.route.snapshot.queryParams.uri||"/system/account"}return i(e,[{key:"ngOnInit",value:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("refresh_token");if(e&&t&&"login"===this.route.routeConfig.path){var n=decodeURI(this.uri)||"/system/account";this.router.navigate([n])}}},{key:"onChangeRemember",value:function(e){this.remember=e.target.checked}},{key:"authentication",value:function(){return this.authService.login(this.username,this.password).toPromise()}},{key:"login",value:function(){return Object(ce.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.username||!this.password){e.next=13;break}return this.spinner.show(),this.busy=!0,e.prev=2,e.next=5,this.authentication();case 5:t=e.sent,(n=localStorage.getItem("lang"))?localStorage.setItem("lang",n):localStorage.setItem("lang","vi"),this.remember?(this.cookieService.set("remember","Yes"),this.cookieService.set("username",this.user.username),this.cookieService.set("password",this.user.password),this.cookieService.set("systemCode",this.user.systemCode.toString())):(this.cookieService.set("remember","No"),this.cookieService.set("username",""),this.cookieService.set("password",""),this.cookieService.set("systemCode","")),localStorage.setItem("user",JSON.stringify(t.user)),this.router.navigate(["/system/account"]),this.alertifyService.success("Login Success!!"),this.busy=!1,this.spinner.hide(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.spinner.hide(),this.busy=!0,this.loginError=!0;case 13:case"end":return e.stop()}},e,this,[[2,10]])}))}},{key:"getMenu",value:function(e){}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}},{key:"checkRole",value:function(){return decodeURI(this.uri),!1}}]),e}(),de.\u0275fac=function(e){return new(e||de)(u.Nb(g.a),u.Nb(g.c),u.Nb(P),u.Nb(R),u.Nb(Y.c),u.Nb(A.a),u.Nb(x))},de.\u0275cmp=u.Hb({type:de,selectors:[["app-login"]],decls:31,vars:5,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"app-body"],[1,"main","d-flex","align-items-center",2,"margin-top","20vh"],[1,"container"],[1,"row"],[1,"col-md-4","mx-auto"],[1,"card-group"],[1,"card","p-4",2,"background","rgba(238, 238, 238, 0.7)","border","1px solid #DDD"],[1,"card-body"],[3,"ngSubmit"],["form","ngForm"],[1,"text-muted",2,"font-size","20px"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"icon-user"],["type","text","name","username","placeholder","Username","autocomplete","username","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","mb-4"],[1,"icon-lock"],["type","password","name","password","placeholder","Password","autocomplete","current-password","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6"],[1,"col-6","text-right"],["type","submit",1,"btn","btn-primary","px-4",3,"disabled"],["class","checkbox mb-3 text-danger",4,"ngIf"],[1,"checkbox","mb-3","text-danger"]],template:function(e,t){if(1&e&&(u.Tb(0,"ngx-spinner",0),u.Tb(1,"p",1),u.Ec(2,"Loading data..."),u.Sb(),u.Sb(),u.Tb(3,"div",2),u.Tb(4,"main",3),u.Tb(5,"div",4),u.Tb(6,"div",5),u.Tb(7,"div",6),u.Tb(8,"div",7),u.Tb(9,"div",8),u.Tb(10,"div",9),u.Tb(11,"form",10,11),u.dc("ngSubmit",function(){return t.login()}),u.Tb(13,"h3",12),u.Ec(14,"Digital Mixing Room System"),u.Sb(),u.Tb(15,"div",13),u.Tb(16,"div",14),u.Tb(17,"span",15),u.Ob(18,"i",16),u.Sb(),u.Sb(),u.Tb(19,"input",17),u.dc("ngModelChange",function(e){return t.username=e}),u.Sb(),u.Sb(),u.Tb(20,"div",18),u.Tb(21,"div",14),u.Tb(22,"span",15),u.Ob(23,"i",19),u.Sb(),u.Sb(),u.Tb(24,"input",20),u.dc("ngModelChange",function(e){return t.password=e}),u.Sb(),u.Sb(),u.Tb(25,"div",5),u.Ob(26,"div",21),u.Tb(27,"div",22),u.Tb(28,"button",23),u.Ec(29,"Login"),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Cc(30,le,2,0,"div",24),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb()),2&e){var n=u.uc(12);u.mc("fullScreen",!0),u.Ab(19),u.mc("ngModel",t.username),u.Ab(5),u.mc("ngModel",t.password),u.Ab(4),u.mc("disabled",!n.valid),u.Ab(2),u.mc("ngIf",t.loginError)}},directives:[Y.a,X.l,X.f,X.g,X.a,X.k,X.e,X.h,c.m],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%;background-repeat:no-repeat;background-size:100% 100%;background-image:url(/assets/img/SSB-background.jpg)}"]}),de),data:{title:"Login Page"}},{path:"register",component:(he=function e(){n(this,e)},he.\u0275fac=function(e){return new(e||he)},he.\u0275cmp=u.Hb({type:he,selectors:[["app-dashboard"]],decls:44,vars:0,consts:[[1,"app-body"],[1,"main","d-flex","align-items-center"],[1,"container"],[1,"row"],[1,"col-md-6","mx-auto"],[1,"card","mx-4"],[1,"card-body","p-4"],[1,"text-muted"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"icon-user"],["type","text","placeholder","Username","autocomplete","username","required","",1,"form-control"],["type","text","placeholder","Email","autocomplete","email","required","",1,"form-control"],[1,"icon-lock"],["type","password","placeholder","Password","autocomplete","new-password","required","",1,"form-control"],[1,"input-group","mb-4"],["type","password","placeholder","Repeat password","autocomplete","new-password","required","",1,"form-control"],["type","button",1,"btn","btn-block","btn-success"],[1,"card-footer","p-4"],[1,"col-6"],["type","button",1,"btn","btn-block","btn-facebook"],["type","button",1,"btn","btn-block","btn-twitter"]],template:function(e,t){1&e&&(u.Tb(0,"div",0),u.Tb(1,"main",1),u.Tb(2,"div",2),u.Tb(3,"div",3),u.Tb(4,"div",4),u.Tb(5,"div",5),u.Tb(6,"div",6),u.Tb(7,"form"),u.Tb(8,"h1"),u.Ec(9,"Register"),u.Sb(),u.Tb(10,"p",7),u.Ec(11,"Create your account"),u.Sb(),u.Tb(12,"div",8),u.Tb(13,"div",9),u.Tb(14,"span",10),u.Ob(15,"i",11),u.Sb(),u.Sb(),u.Ob(16,"input",12),u.Sb(),u.Tb(17,"div",8),u.Tb(18,"div",9),u.Tb(19,"span",10),u.Ec(20,"@"),u.Sb(),u.Sb(),u.Ob(21,"input",13),u.Sb(),u.Tb(22,"div",8),u.Tb(23,"div",9),u.Tb(24,"span",10),u.Ob(25,"i",14),u.Sb(),u.Sb(),u.Ob(26,"input",15),u.Sb(),u.Tb(27,"div",16),u.Tb(28,"div",9),u.Tb(29,"span",10),u.Ob(30,"i",14),u.Sb(),u.Sb(),u.Ob(31,"input",17),u.Sb(),u.Tb(32,"button",18),u.Ec(33,"Create Account"),u.Sb(),u.Sb(),u.Sb(),u.Tb(34,"div",19),u.Tb(35,"div",3),u.Tb(36,"div",20),u.Tb(37,"button",21),u.Tb(38,"span"),u.Ec(39,"facebook"),u.Sb(),u.Sb(),u.Sb(),u.Tb(40,"div",20),u.Tb(41,"button",22),u.Tb(42,"span"),u.Ec(43,"twitter"),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb())},directives:[X.l,X.f,X.g],encapsulation:2}),he),data:{title:"Register Page"}},{path:"",component:oe,runGuardsAndResolvers:"always",data:{title:"Home"},children:[]},{path:"**",redirectTo:"404",pathMatch:"full"}],we=((ge=function e(){n(this,e)}).\u0275fac=function(e){return new(e||ge)},ge.\u0275mod=u.Lb({type:ge}),ge.\u0275inj=u.Kb({imports:[[g.g.forRoot(ke,{relativeLinkResolution:"legacy",useHash:!0})],g.g]}),ge),Te=a("FE24"),Oe=a("2ZVE"),je=a("hrfs"),De=a("lawv"),Ee=((be=function e(t){if(n(this,e),t)throw new Error("Core Module can only be imported to AppModule.")}).\u0275fac=function(e){return new(e||be)(u.ac(be,12))},be.\u0275mod=u.Lb({type:be}),be.\u0275inj=u.Kb({providers:[],imports:[[c.c]]}),be),Ue=a("Uc7L"),xe=a("YD+O"),Ae=a("MNke"),Ce=a("5N8a"),Me=a("K8SV"),Ie=a("z6cu"),Re=a("un/a"),Be=((me=function(){function e(t,r){n(this,e),this.http=t,this.cookieService=r,this.baseUrl=m.apiUrl+"auth/login",this.jwtHelper=new U.a,this.roleValue=new f.a({id:0,name:""}),this.buildingValue=new f.a([{}]),this.levelSource=new f.a({}),this.currentLevel=this.levelSource.asObservable(),this.apiUrl="".concat(m.apiUrl,"account"),this._user=new f.a(null),this.user$=this._user.asObservable(),this._function=new f.a(null),this.function$=this._function.asObservable(),this.functionsValue=new f.a({}),window.addEventListener("storage",this.storageEventListener.bind(this))}return i(e,[{key:"storageEventListener",value:function(e){e.storageArea===localStorage&&("logout-event"===e.key&&(this.stopTokenTimer(),this._user.next(null),this.setFunctions(null)),"login-event"===e.key&&this.stopTokenTimer(),null!==e.oldValue&&"functions"===e.key&&JSON.stringify(e.oldValue)!==JSON.stringify(e.newValue)&&(this.logOut(),window.location.reload()),null!==e.oldValue&&"level"===e.key&&JSON.stringify(e.oldValue)!==JSON.stringify(e.newValue)&&(this.logOut(),window.location.reload()),"user"===e.key&&null!==e.oldValue&&JSON.stringify(e.oldValue)!==JSON.stringify(e.newValue)&&this.logOut(),"menus"===e.key&&null!==e.oldValue&&JSON.stringify(e.oldValue)!==JSON.stringify(e.newValue)&&this.logOut())}},{key:"ngOnDestroy",value:function(){window.removeEventListener("storage",this.storageEventListener.bind(this))}},{key:"login",value:function(e,t){var n=this;return this.http.post("".concat(this.apiUrl,"/login"),{username:e,password:t}).pipe(Object(E.a)(function(e){var t=e.loginResult,r=e.user;return localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("avatar",r.user.image),n.decodedToken=n.jwtHelper.decodeToken(t.accessToken),n.currentUser=r.user,n.setLocalStorage(t),n.startTokenTimer(),t}))}},{key:"getBuildingUserByUserID",value:function(e){return this.http.get("".concat(m.apiUrlEC,"BuildingUser/GetBuildingUserByUserID/").concat(e),{})}},{key:"logout",value:function(){var e=this;this.http.post("".concat(this.apiUrl,"/logout"),{}).pipe(Object(z.a)(function(){e.clearLocalStorage(),e._user.next(null),e.setBuildingValue(null),e.setRoleValue(null),e._user.next(null),e.stopTokenTimer()})).subscribe()}},{key:"refreshToken",value:function(){var e=this,t=localStorage.getItem("refresh_token");return t&&t!==void 0+""?this.http.post("".concat(this.apiUrl,"/refresh-token"),{refreshToken:t}).pipe(Object(F.a)(function(){return Object(L.a)([])}),Object(E.a)(function(t){return e.setLocalStorage(t),e.startTokenTimer(),t})):(this.clearLocalStorage(),Object(L.a)(null))}},{key:"setLocalStorage",value:function(e){localStorage.setItem("token",e.accessToken),localStorage.setItem("refresh_token",e.refreshToken),localStorage.setItem("login-event","login"+Math.random())}},{key:"clearLocalStorage",value:function(){localStorage.clear(),localStorage.setItem("logout-event","logout"+Math.random())}},{key:"getTokenRemainingTime",value:function(){var e=localStorage.getItem("token");if(!e)return 0;var t=JSON.parse(atob(e.split(".")[1]));return new Date(1e3*t.exp).getTime()-Date.now()}},{key:"startTokenTimer",value:function(){var e=this,t=this.getTokenRemainingTime();this.timer=Object(L.a)(!0).pipe(Object(N.a)(t),Object(J.a)(function(){return e.refreshToken().subscribe()})).subscribe()}},{key:"stopTokenTimer",value:function(){var e;null===(e=this.timer)||void 0===e||e.unsubscribe()}},{key:"loggedIn",value:function(){var e=localStorage.getItem("token");return!this.jwtHelper.isTokenExpired(e)}},{key:"logOut",value:function(){this.cookieService.deleteAll(),localStorage.clear(),this.decodedToken=null,this.currentUser=null,this.functionsValue.next({}),this._user.next({}),this.buildingValue.next([{}]),this.roleValue.next({})}},{key:"roleMatch",value:function(e){var t=!1,n=this.decodedToken.role;return e.forEach(function(e){n.includes(e)&&(t=!0)}),t}},{key:"setBuildingValue",value:function(e){this.buildingValue.next(e)}},{key:"getBuildingValue",value:function(){return this.buildingValue.asObservable()}},{key:"setRoleValue",value:function(e){this.roleValue.next(e)}},{key:"getRoleValue",value:function(){return this.roleValue.asObservable()}},{key:"setFunctions",value:function(e){this.functionsValue.next(e)}},{key:"getFunctionsValue",value:function(){return this.functionsValue.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||me)(u.ac(v.b),u.ac(A.a))},me.\u0275prov=u.Jb({token:me,factory:me.\u0275fac,providedIn:"root"}),me),Ve=((ve=function(){function e(t,r,i){n(this,e),this.alertify=t,this.authService=r,this.router=i}return i(e,[{key:"handleError",value:function(e){if(0===e.status)console.error("An error occurred: status = 0");else{switch(e.status){case 401:break;case 400:console.error(e.error);break;case 500:console.error("M\xe1y ch\u1ee7 \u0111ang g\u1eb7p v\u1ea5n \u0111\u1ec1. Vui l\xf2ng th\u1eed l\u1ea1i sau!<br> The server error. Please try again after sometime!")}console.error("Backend returned code ".concat(e.status,", body was: ").concat(e.error))}return Object(Ie.a)("Something bad happened; please try again later.")}},{key:"intercept",value:function(e,t){return localStorage.getItem("token")&&(e=e.clone({setHeaders:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})),t.handle(e).pipe(Object(Re.a)(1),Object(F.a)(this.handleError))}}]),e}()).\u0275fac=function(e){return new(e||ve)(u.ac(x),u.ac(Be),u.ac(g.c))},ve.\u0275prov=u.Jb({token:ve,factory:ve.\u0275fac}),ve),Le=function(){var e=function e(){n(this,e)};return e.CREATE="CREATE",e.EDIT="EDIT",e.DELETE="DELETE",e.VIEW="VIEW",e.APPROVAL="APPROVAL",e.EXCEL_EXPORT="EXCEL_EXPORT",e.EXCEL_IMPORT="EXCEL_IMPORT",e.PRINT="PRINT",e.DONE="DONE",e.STOP_LINE="STOP_LINE",e.FINISH="FINISH",e.RELEASE="RELEASE",e.REJECT="REJECT",e.CLONE="CLONE",e}(),ze=((fe=function(){function t(e,r,i,a){n(this,t),this.authService=e,this.alertify=r,this.router=i,this.route=a}return i(t,[{key:"canActivate",value:function(e,t){return this.authService.loggedIn()?!1!==this.checkRole(e)||(this.authService.logOut(),this.alertify.error("Access-denied",!0),!1):(this.router.navigate(["login"],{queryParams:{uri:t.url},replaceUrl:!0}),!1)}},{key:"checkRole",value:function(t){var n=t.data.functionCode;if(n){var r,i=JSON.parse(localStorage.getItem("functions")).map(function(e){return null==e?void 0:e.childrens}).filter(Boolean),a=e([].concat.apply([],i).filter(function(e){return e.functionCode===n}));try{for(a.s();!(r=a.n()).done;){var o=r.value;if(n.includes(o.functionCode)&&o.code===Le.VIEW)return!0}}catch(s){a.e(s)}finally{a.f()}return!1}return!0}}]),t}()).\u0275fac=function(e){return new(e||fe)(u.ac(Be),u.ac(x),u.ac(g.c),u.ac(g.a))},fe.\u0275prov=u.Jb({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe),Fe=((pe=function(){function e(t,r,i){n(this,e),this.roleService=t,this.router=r,this.alertify=i,this.page=1,this.pageSize=10}return i(e,[{key:"resolve",value:function(e){var t=this;return this.roleService.getAll().pipe(Object(F.a)(function(e){return console.log(e),t.alertify.error("Problem retrieving data"),localStorage.removeItem("user"),localStorage.removeItem("token"),t.router.navigate(["/login"]),Object(L.a)(null)}))}}]),e}()).\u0275fac=function(e){return new(e||pe)(u.ac(R),u.ac(g.c),u.ac(x))},pe.\u0275prov=u.Jb({token:pe,factory:pe.\u0275fac}),pe),Ne=function e(){n(this,e)},Je={headers:new v.d({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})},Pe=((Se=function(){function e(t){n(this,e),this.http=t,this.baseUrl=m.apiUrl,this.baseUrlEC=m.apiUrlEC,this.messageSource=new f.a(0),this.currentMessage=this.messageSource.asObservable()}return i(e,[{key:"changeMessage",value:function(e){this.messageSource.next(e)}},{key:"delete",value:function(e){return this.http.delete("".concat(this.baseUrl,"Users/Delete/").concat(e))}},{key:"rename",value:function(e){return this.http.post("".concat(this.baseUrl,"Users/rename"),e,{headers:Je.headers})}},{key:"update",value:function(e){return this.http.post("".concat(this.baseUrl,"Users/Update"),e)}},{key:"getUsers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"%20";return this.http.get("".concat(this.baseUrl,"Users/GetAllPaging/").concat(m.systemCode,"/").concat(e,"/").concat(t,"/").concat(n))}},{key:"create",value:function(e){return this.http.post("".concat(this.baseUrl,"Users/Create"),e)}},{key:"getAllUsers",value:function(e,t){var n=new Ne;return this.http.get("".concat(this.baseUrl,"Users/GetAllUsers/").concat(m.systemCode,"/").concat(e,"/").concat(t),{observe:"response"}).pipe(Object(E.a)(function(e){return n.result=e.body,null!=e.headers.get("Pagination")&&(n.pagination=JSON.parse(e.headers.get("Pagination"))),n}))}},{key:"search",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"%20",r=new Ne;return this.http.get("".concat(this.baseUrl,"Users/GetAllUsers/").concat(m.systemCode,"/").concat(e,"/").concat(t,"/").concat(n),{observe:"response"}).pipe(Object(E.a)(function(e){return r.result=e.body,null!=e.headers.get("Pagination")&&(r.pagination=JSON.parse(e.headers.get("Pagination"))),r}))}},{key:"changeAvatar",value:function(e){return this.http.post(this.baseUrl+"Users/ChangedAvatar",e)}},{key:"getRole",value:function(){return this.http.get("".concat(this.baseUrl,"Roles/GetAll"))}},{key:"getAllUserInfo",value:function(){return this.http.get("".concat(this.baseUrlEC,"UserDetail/getAllUserInfo"))}},{key:"getAllUserInfoRoles",value:function(){return this.http.get("".concat(this.baseUrlEC,"UserDetail/GetAllUserInfoRoles"))}}]),e}()).\u0275fac=function(e){return new(e||Se)(u.ac(v.b))},Se.\u0275prov=u.Jb({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se),Ge=((ye=function(){function e(t,r,i){n(this,e),this.todolistService=t,this.router=r,this.alertify=i,this.page=1,this.pageSize=10}return i(e,[{key:"resolve",value:function(e){var t=this;return this.todolistService.getAllUsers(this.page,this.pageSize).pipe(Object(F.a)(function(e){return console.log(e),t.alertify.error("Problem retrieving data"),localStorage.removeItem("user"),localStorage.removeItem("token"),t.router.navigate(["/login"]),Object(L.a)(null)}))}}]),e}()).\u0275fac=function(e){return new(e||ye)(u.ac(Pe),u.ac(g.c),u.ac(x))},ye.\u0275prov=u.Jb({token:ye,factory:ye.\u0275fac}),ye);function He(){return localStorage.getItem("token")}var Ye,qe=((Ye=function e(){n(this,e)}).\u0275fac=function(e){return new(e||Ye)},Ye.\u0275mod=u.Lb({type:Ye,bootstrap:[p]}),Ye.\u0275inj=u.Kb({providers:[ze,x,ze,Y.c,Ge,Fe,P,{provide:c.j,useClass:c.g},d.c,{provide:v.a,useClass:Ve,multi:!0}],imports:[[W.b,s.a,W.c,l.a,we,X.b,X.j,c.c,Q.a,Q.c,v.c,Ce.a,G.e,De.a,Ae.a,Me.a,xe.a,Ue.a,Ee,Y.b,U.b.forRoot({config:{tokenGetter:He,allowedDomains:["10.4.0.76:1009"],disallowedRoutes:["10.4.0.76:1009/api/auth"]}}),s.a,l.a,we,_.a,_.b.forRoot(),_.d,_.f,_.g,h.a,Te.a.forRoot(),Oe.a.forRoot(),je.a,d.a,d.b.forRoot()]]}),Ye);m.production&&Object(u.S)(),s.c().bootstrapModule(qe,{useJit:!0,preserveWhitespaces:!0}).catch(function(e){return console.log(e)})},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0,5]]])}();