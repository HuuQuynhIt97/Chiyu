(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,r){e.exports=r("zUnb")},RnhZ:function(e,t,r){var s={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn-bd":"loYQ","./bn-bd.js":"loYQ","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-in":"7C5Q","./en-in.js":"7C5Q","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./en-sg":"t+mt","./en-sg.js":"t+mt","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-mx":"tbfe","./es-mx.js":"tbfe","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fil":"1ppg","./fil.js":"1ppg","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-deva":"qvJo","./gom-deva.js":"qvJo","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./oc-lnc":"Fnuy","./oc-lnc.js":"Fnuy","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tk":"Wv91","./tk.js":"Wv91","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-mo":"OmwH","./zh-mo.js":"OmwH","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function n(e){var t=i(e);return r(t)}function i(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=i,e.exports=n,n.id="RnhZ"},zUnb:function(e,t,r){"use strict";r.r(t);var s=r("cUpR"),n=r("8Y7J"),i=r("SVse"),a=r("omvX"),o=r("aLe/"),l=r("rVqu"),c=r("iInd"),u=r("dgaq");let h=(()=>{class e{constructor(e,t){this.router=e,this.iconSet=t,t.icons=Object.assign({},u.a)}ngOnInit(){this.router.events.subscribe(e=>{e instanceof c.b&&window.scrollTo(0,0)})}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(c.c),n.Nb(l.c))},e.\u0275cmp=n.Hb({type:e,selectors:[["body"]],features:[n.zb([l.c])],decls:1,vars:0,template:function(e,t){1&e&&n.Ob(0,"router-outlet")},directives:[c.h],encapsulation:2}),e})();var d=r("2Vo4"),g=r("IheW");const b={production:!0,systemCode:3,apiUrlEC:"http://10.4.4.224:80/api/",apiUrl:"http://10.4.0.70:1018/api/",apiUrl2:"http://10.4.0.70:1018/api/",hub:"http://10.4.4.224:80/ec-hub",scalingHub:"http://10.4.4.224:80/ec-hub",scalingHubLocal:"http://localhost:5001/scalingHub",_mqtt:{server:"mqtt.myweb.com",protocol:"wss",port:1883},get mqtt(){return this._mqtt},set mqtt(e){this._mqtt=e}};new g.d({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});let p=(()=>{class e{constructor(e){this.http=e,this.baseUrl=b.apiUrl,this.messageSource=new d.a(0),this.currentMessage=this.messageSource.asObservable()}changeMessage(e){this.messageSource.next(e)}delete(e){return this.http.delete(`${this.baseUrl}Oc/Delete/${e}`)}rename(e){return this.http.put(`${this.baseUrl}Oc/Update`,e)}getOCs(){return this.http.get(`${this.baseUrl}Oc/GetAllAsTreeView`)}GetUserByOCname(e){return this.http.get(`${this.baseUrl}Oc/GetUserByOCname/${e}`,{})}GetUserByOcID(e){return this.http.get(`${this.baseUrl}Oc/GetUserByOcID/${e}`,{})}getAllGroup(){return this.http.get(`${this.baseUrl}Oc/GetAllGroup104574`)}getResultByGroup(e,t,r){return this.http.get(`${this.baseUrl}Oc/GetResultByGroup/${e}/${t}/${r}`,{})}addOC(e){return this.http.post(`${this.baseUrl}Oc/Add`,e)}updateOC(e){return this.http.put(`${this.baseUrl}Oc/Update`,e)}mapUserOC(e){return this.http.post(`${this.baseUrl}Oc/MappingUserOC`,e)}mapRangeUserOC(e){return this.http.post(`${this.baseUrl}Oc/MappingRangeUserOC`,e)}removeUserOC(e){return this.http.post(`${this.baseUrl}Oc/RemoveUserOC`,e)}createMainOC(e){return this.http.post(`${this.baseUrl}Ocs/CreateOc`,e)}createSubOC(e){return this.http.post(`${this.baseUrl}Ocs/CreateSubOC`,e)}}return e.\u0275fac=function(t){return new(t||e)(n.ac(g.b))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=r("lJxs"),f=r("tl5U");let S=(()=>{class e{constructor(){this.$swal=Swal,this.Toast=Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}})}showLoading(e=2e3){Swal({title:"Now loading",allowEscapeKey:!1,allowOutsideClick:!1,timer:e,onOpen:()=>{Swal.showLoading()}}).then(()=>{},e=>{"timer"===e&&(console.log("closed by timer!!!!"),Swal({title:"Finished!",type:"success",timer:2e3,showConfirmButton:!1}))})}confirm(e,t,r){Swal.fire({title:e,html:t,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(e=>{e.value?r():e.dismiss===Swal.DismissReason.cancel&&Swal.fire("Cancelled","Your imaginary file is safe :)","error")})}confirm2(e,t,r,s){Swal.fire({title:e,html:t,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(e=>{e.value?r():e.dismiss===Swal.DismissReason.cancel&&s()})}valid(e,t){return new Promise((r,s)=>{Swal.fire({title:e,text:t,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(e=>{e.value?r(!0):e.dismiss===Swal.DismissReason.cancel&&s(!1)})})}validation(e,t){Swal.fire(e,t,"warning")}success(e,t){t?Swal.fire("Successfully!",e,"success"):this.Toast.fire({icon:"success",title:e})}error(e,t){t?Swal.fire("Error!",e,"error"):this.Toast.fire({icon:"error",title:e})}warning(e,t){t?Swal.fire("Warning!",e,"warning"):this.Toast.fire({icon:"warning",title:e})}message(e,t){t?Swal.fire("Info!",e,"info"):this.Toast.fire({icon:"info",title:e})}delete(e,t){return new Promise((r,s)=>{Swal.fire({title:e,text:t,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(e=>{e.value?r(!0):e.dismiss===Swal.DismissReason.cancel&&s(!1)})})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=r("z4EA");let y=(()=>{class e{constructor(e,t,r,s){this.http=e,this.router=t,this.alertify=r,this.cookieService=s,this.baseUrl=b.apiUrl+"auth/login",this.jwtHelper=new f.a,this.roleValue=new d.a({id:0,name:""}),this.buildingValue=new d.a([{}]),this.levelSource=new d.a({}),this.currentLevel=this.levelSource.asObservable()}login(e){return this.http.post(this.baseUrl,e).pipe(Object(m.a)(e=>{const t=e;t&&(localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("avatar",t.user.User.image),this.decodedToken=this.jwtHelper.decodeToken(t.token),this.currentUser=t.user.User,this.getBuildingUserByUserID(t.user.User.ID).subscribe(e=>{localStorage.setItem("building",JSON.stringify(e.data)),this.setBuildingValue(e.data)}))}))}getBuildingUserByUserID(e){return this.http.get(`${b.apiUrlEC}BuildingUser/GetBuildingUserByUserID/${e}`,{})}loggedIn(){const e=localStorage.getItem("token");return!this.jwtHelper.isTokenExpired(e)}logOut(){this.cookieService.deleteAll(),localStorage.clear(),this.decodedToken=null,this.currentUser=null,this.buildingValue=null,this.roleValue=null,this.router.navigate(["login"])}logOutAuth(){this.cookieService.deleteAll(),localStorage.clear(),this.decodedToken=null,this.currentUser=null,this.buildingValue=null,this.roleValue=null,this.router.navigate(["login"]),location.reload()}roleMatch(e){let t=!1;const r=this.decodedToken.role;return e.forEach(e=>{r.includes(e)&&(t=!0)}),t}setBuildingValue(e){this.buildingValue.next(e)}getBuildingValue(){return this.buildingValue.asObservable()}setRoleValue(e){this.roleValue.next(e)}getRoleValue(){return this.roleValue.asObservable()}}return e.\u0275fac=function(t){return new(t||e)(n.ac(g.b),n.ac(c.c),n.ac(S),n.ac(v.a))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),T=(()=>{class e{constructor(){}monthComparator(e,t){let r=new Date(e),s=new Date(t);return r.getMonth()===s.getMonth()?1:-1}addDays(e,t){let r=new Date(e);return r.setDate(r.getDate()+t),r}getMondaysInMonth(e){let t=e-1||(new Date).getMonth();1===e&&(t=0);let r=new Date((new Date).getFullYear(),t),s=r.getMonth(),n=[];for(r.setDate(1);1!==r.getDay();)r.setDate(r.getDate()+1);for(;r.getMonth()===s;)n.push(new Date(r.getTime())),r.setDate(r.getDate()+7);return this.toFormatDatesArray(n)}getWednesdaysInMonth(e){let t=[];return this.getMondaysInMonth(e).map(e=>{let r=this.addDays(e,1);1===this.monthComparator(e,r)&&t.push(r)}),this.toFormatDatesArray(t)}getTuesdaysInMonth(e){let t=[];return this.getMondaysInMonth(e).map(e=>{let r=this.addDays(e,2);1===this.monthComparator(e,r)&&t.push(r)}),this.toFormatDatesArray(t)}getThursdaysInMonth(e){let t=[];return this.getMondaysInMonth(e).map(e=>{let r=this.addDays(e,3);1===this.monthComparator(e,r)&&t.push(r)}),this.toFormatDatesArray(t)}getFridaysInMonth(e){let t=[];return this.getMondaysInMonth(e).map(e=>{let r=this.addDays(e,4);1===this.monthComparator(e,r)&&t.push(r)}),this.toFormatDatesArray(t)}getSaturdaysInMonth(e){let t=[];return this.getMondaysInMonth(e).map(e=>{let r=this.addDays(e,5);1===this.monthComparator(e,r)&&t.push(r)}),this.toFormatDatesArray(t)}getSundaysInMonth(e){let t=[];return this.getMondaysInMonth(e).map(e=>{let r=this.addDays(e,6);1===this.monthComparator(e,r)&&t.push(r)}),t}getDatesOfMonth(e=0){return 0===e?"#N/A":e+["#N/A","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Nighth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","NineTeenth","Twentieth","Twenty-first","Twenty-second","Twenty-third","Twenty-fourth","Twenty-fifth","Twenty-sixth","Twenty-seventh","Twenty-eight","Twenty-nineth","Thirtieth","Thirty-first"].map(e=>e.substring(e.length-2,e.length))[e]}getFirstDateByMonth(e){let t=new Date((new Date).getFullYear(),e);return new Date(t.getFullYear(),t.getMonth(),1).toLocaleString()}getLastDateByMonth(e){let t=new Date((new Date).getFullYear(),e);return new Date(t.getFullYear(),t.getMonth()+1,0)}checkQuarterly(e,t){let r=["First quarter","Second quarter","Third quarter","Fourth quarter"],s=r.map(e=>e.substr(0,3)).indexOf(e);if(""===t)return{status:!1,quarter:r[s]};let n=new Date(t),i=n.getMonth()+1,a=n.getDate();if([1,2,3,4].includes(i)&&0===s){if(4===i&&1===a)return{status:!0,quarter:r[s]};if(i>=1&&i<=3)return{status:!0,quarter:r[s]}}if([4,5,6,7].includes(i)&&1===s){if(7===i&&1===a)return{status:!0,quarter:r[s]};if(i>=4&&i<=6)return{status:!0,quarter:r[s]}}if([7,8,9,10].includes(i)&&2===s){if(10===i&&1===a)return{status:!0,quarter:r[s]};if(i>=7&&i<=9)return{status:!0,quarter:r[s]}}return[10,11,12].includes(i)&&3===s?{status:!0,quarter:r[s]}:{status:!1,quarter:r[s]}}toFormatDatesArray(e){return e.map(e=>this.toFormatDate(e,!0))}toFormatDate(e,t=!0){if(""===(e||""))return"";let r=new Date(e),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=r.getDate(),i=r.getMonth(),a=r.getFullYear();return t?`${n} ${s[i]}, ${a}`:`${n} ${s[i]}`}getFirstDateLastDateQuarter(e){switch(e){case 1:return{firstDate:this.toFormatDate(this.getFirstDateByMonth(1)),lastDate:this.toFormatDate(this.getFirstDateByMonth(3))};case 2:return{firstDate:this.toFormatDate(this.getFirstDateByMonth(4)),lastDate:this.toFormatDate(this.getFirstDateByMonth(6))};case 3:return{firstDate:this.toFormatDate(this.getFirstDateByMonth(7)),lastDate:this.toFormatDate(this.getFirstDateByMonth(9))};case 4:return{firstDate:this.toFormatDate(this.getFirstDateByMonth(10)),lastDate:this.toFormatDate(this.getFirstDateByMonth(12))}}}getQuarter(e){return e=e||new Date,[1,2,3].includes(e.getMonth())?1:[4,5,6].includes(e.getMonth())?2:[7,8,9].includes(e.getMonth())?3:[10,11,12].includes(e.getMonth())?4:void 0}getDateInMonth(e){return new Date((new Date).getFullYear(),e,0).getDate()}toDateTimeNowISO(){let e=new Date;return e.toISOString(),e}toTitleCase(e){return e.replace(/\S+/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())}convertDate(e){function t(e){return e<10?"0"+e:e}let r=new Date(e);return[t(r.getDate()),t(r.getMonth()+1),r.getFullYear()].join("/")}dateNow(e="/"){function t(e){return e<10?"0"+e:e}let r=new Date,s=r.getDate(),n=r.getMonth()+1,i=r.getFullYear();return t(n)+e+t(s)+e+i}dateFormat(e){let t,r,s,n=new Date(e);return t=n.getMonth()+1,t<10&&(s="0"+t),r=n.getDate()<10?"0"+n.getDate():n.getDate(),s+"-"+r+"-"+n.getFullYear()}JSONDateWithTime(e){let t,r,s,n=new Date(e);t=n.getMonth()+1,s=t<10?"0"+t:t,r=n.getDate()<10?"0"+n.getDate():n.getDate();let i=n.getFullYear(),a=`${r}/${s}/${i}`,o=n.getHours()<10?"0"+n.getHours():n.getHours(),l=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),c=n.getSeconds();a=o+":"+l+" - "+a;let u,h=new Date,d=h.getDate(),g=h.getMonth()+1,b=h.getFullYear(),p=h.getHours(),m=h.getMinutes(),f=h.getSeconds();return u=a,p-o==0&&m-l==0&&b-i==0&&g-s==0&&d-r==0&&(u=f-c==0?"just recently":f-c==1?f-c+" second ago":f-c+" seconds ago"),p-o==0&&m-l>0&&b-i==0&&g-s==0&&d-r==0&&(u=m-l==1?m-l+" minute ago":m-l+" minutes ago"),p-o>0&&b-i==0&&g-s==0&&d-r==0&&(u=p-o==1?p-o+" hour ago":p-o+" hours ago"),b-i==0&&g-s==0&&d-r>0&&d-r<=7&&(u=d-r==1?d-r+" day ago":d-r+" days ago"),b-i==0&&g!==s&&(r=d-r,r=30*(g-s)+r,0<r&&r<=7&&(u=r+" days ago")),u}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var w=r("wd/R");let k=(()=>{class e{constructor(e){this.http=e,this.baseUrl=b.apiUrlEC,this.messageSource=new d.a(0),this.currentMessage=this.messageSource.asObservable()}changeMessage(e){this.messageSource.next(e)}getAll(){return this.http.get(`${this.baseUrl}Role/GetAll`)}mappingUserRole(e){return this.http.post(`${this.baseUrl}UserRole/MappingUserRole`,e)}mapUserRole(e,t){return this.http.put(`${this.baseUrl}UserRole/MapUserRole/${e}/${t}`,{})}lock(e){return this.http.put(`${this.baseUrl}UserRole/Lock`,e)}isLock(e){return this.http.put(`${this.baseUrl}UserRole/IsLock`,e)}getRoleByUserID(e){return this.http.get(`${this.baseUrl}UserRole/GetRoleByUserID/${e}`)}create(e){return this.http.post(this.baseUrl+"Role/Create",e)}update(e){return this.http.put(this.baseUrl+"Role/Update",e)}delete(e){return this.http.delete(this.baseUrl+"Role/Delete/"+e)}getScreenFunctionAndAction(e){return this.http.post(`${this.baseUrl}Permission/GetScreenFunctionAndAction`,{roleIDs:e}).pipe(Object(m.a)(e=>{const t=e;for(const r of t){const e=[];for(const t of r.fields.dataSource){for(const s of t.childrens)s.isChecked=s.status,s.status&&e.push(s.id);const r=t.childrens.every(e=>!0===e.status);r&&(e.push(t.id),t.isChecked=r)}}return t}))}}return e.\u0275fac=function(t){return new(t||e)(n.ac(g.b))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),O=(()=>{class e{constructor(){this.messageSource=new d.a(0),this.SourceLang=new d.a("en"),this.currentMessage=this.messageSource.asObservable(),this.currentSourceLang=this.SourceLang.asObservable(),this.messageSources=new d.a(0),this.currentMessages=this.messageSources.asObservable(),this.info=new d.a(!1),this.locale=new d.a(null)}changeMessage(e){this.messageSource.next(e)}changeMessages(e){this.messageSources.next(e)}changeLang(e){this.SourceLang.next(e)}setValue(e){this.info.next(e)}getValue(){return this.info.asObservable()}setValueLocale(e){this.locale.next(e)}getValueLocale(){return this.locale.asObservable()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const j=[{name:"Dashboard",url:"/dashboard",icon:"icon-speedometer",badge:{variant:"info",text:"NEW"}},{name:"0.System",url:"/system",icon:"icon-puzzle",children:[{name:"Account Group",url:"/system/account-group",icon:"icon-puzzle"},{name:"Account",url:"/system/account",icon:"icon-puzzle"},{name:"Progress",url:"/system/progress",icon:"icon-puzzle"},{name:"Period",url:"/system/period",icon:"icon-puzzle"},{name:"Account Group Period",url:"/system/account-group-period",icon:"icon-puzzle"},{name:"OC",url:"/system/oc",icon:"icon-puzzle"},{name:"OC User",url:"/system/oc-user",icon:"icon-puzzle"}]},{name:"1.Maintain",url:"/maintain",icon:"icon-bell",children:[{name:"Mailing",url:"/maintain/mailing",icon:"icon-bell"}]},{name:"2.Transaction",url:"/transaction",icon:"icon-cursor",children:[{name:"2.1 KPI Objective",url:"/transaction/objective",icon:"icon-cursor"},{name:"2.2 To Do List",url:"/transaction/todolist",icon:"icon-cursor"}]},{name:"3.Kanban",url:"/kanban",icon:"icon-star",children:[]},{name:"4.Report",url:"/report",icon:"icon-calculator",children:[]}];var D=r("LRne"),E=r("nYR2"),U=r("JIr8"),x=r("3E0/"),C=r("vkgz");let M=(()=>{class e{constructor(e,t){this.http=e,this.cookieService=t,this.baseUrl=b.apiUrl+"auth/login",this.jwtHelper=new f.a,this.roleValue=new d.a({id:0,name:""}),this.buildingValue=new d.a([{}]),this.levelSource=new d.a({}),this.currentLevel=this.levelSource.asObservable(),this.apiUrl=`${b.apiUrl}auth`,this._user=new d.a(null),this.user$=this._user.asObservable(),this._function=new d.a(null),this.function$=this._function.asObservable(),this.functionsValue=new d.a({}),window.addEventListener("storage",this.storageEventListener.bind(this))}storageEventListener(e){localStorage}ngOnDestroy(){window.removeEventListener("storage",this.storageEventListener.bind(this))}login(e,t){return this.http.post(`${this.apiUrl}/login`,{username:e,password:t}).pipe(Object(m.a)(e=>{const t=e,r=e.user;return localStorage.setItem("user",JSON.stringify(r)),this._user.next(t),this.currentUser=r,t}))}logout(){this.http.post(`${this.apiUrl}/logout`,{}).pipe(Object(E.a)(()=>{this.clearLocalStorage(),this._user.next(null),this.setBuildingValue(null),this.setRoleValue(null),this._user.next(null),this.stopTokenTimer()})).subscribe()}refreshToken(){const e=localStorage.getItem("refresh_token");return e&&e!==void 0+""?this.http.post(`${this.apiUrl}/refresh-token`,{refreshToken:e}).pipe(Object(U.a)(()=>Object(D.a)([])),Object(m.a)(e=>(this._user.next(e),this.setLocalStorage(e),this.startTokenTimer(),e))):(this.clearLocalStorage(),Object(D.a)(null))}setLocalStorage(e){localStorage.setItem("login-event","login"+Math.random())}clearLocalStorage(){localStorage.clear(),localStorage.setItem("logout-event","logout"+Math.random())}getTokenRemainingTime(){const e=localStorage.getItem("token");if(!e)return 0;const t=JSON.parse(atob(e.split(".")[1]));return new Date(1e3*t.exp).getTime()-Date.now()}startTokenTimer(){const e=this.getTokenRemainingTime();this.timer=Object(D.a)(!0).pipe(Object(x.a)(e),Object(C.a)(()=>this.refreshToken().subscribe())).subscribe()}stopTokenTimer(){var e;null===(e=this.timer)||void 0===e||e.unsubscribe()}loggedIn(){const e=localStorage.getItem("token");return!this.jwtHelper.isTokenExpired(e)}logOut(){this.cookieService.deleteAll(),localStorage.clear(),this.decodedToken=null,this.currentUser=null,this.functionsValue.next({}),this._user.next({}),this.buildingValue.next([{}]),this.roleValue.next({})}roleMatch(e){let t=!1;const r=this.decodedToken.role;return e.forEach(e=>{r.includes(e)&&(t=!0)}),t}setBuildingValue(e){this.buildingValue.next(e)}getBuildingValue(){return this.buildingValue.asObservable()}setRoleValue(e){this.roleValue.next(e)}getRoleValue(){return this.roleValue.asObservable()}setFunctions(e){this.functionsValue.next(e)}getFunctionsValue(){return this.functionsValue.asObservable()}}return e.\u0275fac=function(t){return new(t||e)(n.ac(g.b),n.ac(v.a))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var A=r("emFE"),I=r("H552"),R=r("7g+E"),B=r("G0yt"),V=r("Iluq"),L=r("PDtH"),z=r("10VE"),F=r("s7LF");const N=["ingredientinfoGrid"];function $(e,t){if(1&e&&(n.Tb(0,"div"),n.Tb(1,"div",53),n.Tb(2,"h1"),n.Ec(3),n.hc(4,"date"),n.Sb(),n.Ob(5,"div",54),n.Tb(6,"p"),n.Tb(7,"label",55),n.Ec(8,"Upload by:"),n.Sb(),n.Ec(9),n.Sb(),n.Sb(),n.Sb()),2&e){const e=t.$implicit;n.Ab(3),n.Hc("",e.name," (",n.jc(4,4,e.upatedTime,"YYYY-MM-dd HH:mm"),")"),n.Ab(2),n.mc("innerHTML",e.description,n.yc),n.Ab(4),n.Gc(" ",e.uploadBy,"")}}function J(e,t){if(1&e&&(n.Tb(0,"div",47),n.Tb(1,"h4",48),n.Ec(2," Version History "),n.Sb(),n.Tb(3,"button",49),n.dc("click",function(){return t.$implicit.dismiss("Cross click")}),n.Tb(4,"span",50),n.Ec(5,"\xd7"),n.Sb(),n.Sb(),n.Sb(),n.Tb(6,"div",51),n.Tb(7,"div",30),n.Tb(8,"div",31),n.Cc(9,$,10,7,"div",52),n.Sb(),n.Sb(),n.Sb()),2&e){const e=n.gc();n.Ab(9),n.mc("ngForOf",e.data)}}const P=function(){return["/"]},G=function(){return{src:"assets/img/logo.png",width:50,height:25,alt:"Logo"}},H=function(){return{src:"assets/img/logo.png",width:25,height:25,alt:"Logo"}};let Y=(()=>{class e{constructor(e,t,r,s,n,i,a,o,l,c,u,h){this.authService=e,this.authenticationService=t,this.roleService=r,this.alertify=s,this.calendarsService=n,this.sanitizer=i,this.router=a,this.dataService=o,this.ocService=l,this.spinner=c,this.cookieService=u,this.modalService=h,this.sidebarMinimized=!1,this.navItems=j,this.fields={text:"name",value:"id"},this.toolbarOptions=["Search","ExcelExport"],this.pageSettings={pageCount:100,pageSizes:[50,100,200,"All"],pageSize:100},this.filterSettings={type:"Excel"},this.fieldsBuildings={text:"name",value:"id"},this.buildingID=0,this.onFilteringBuilding=e=>{let t=new I.e;t=""!==e.text?t.where("name","contains",e.text,!0):t,e.updateData(this.buildings,t)}}toggleMinimize(e){this.sidebarMinimized=e}ngOnInit(){this.getAllGroup(),this.endDate=new Date,this.startDate=new Date,this.searchOptions={fields:["guestID","cardNo","guestName","department","eventDescription","verificationSource"],operator:"contains",ignoreCase:!0},this.page=1,this.pageSize=20,this.currentTime=w().format("hh:mm:ss A"),setInterval(()=>this.updateCurrentTime(),1e3)}createdSearch(e){var t=this.grid.element,r=document.createElement("span");r.className="e-clear-icon",r.id=t.id+"clear",r.onclick=this.cancelBtnClick.bind(this),t.querySelector(".e-toolbar-item .e-input-group").appendChild(r)}cancelBtnClick(e){this.grid.searchSettings.key="",this.grid.element.querySelector(".e-input-group.e-search .e-input").value=""}ngAfterViewInit(){}getResultByGroup(){this.ocService.getResultByGroup(this.buildingID,this.startDate.toDateString(),this.endDate.toDateString()).subscribe(e=>{this.data=e.filter(e=>"Unregistered Guest"!==e.eventDescription&&"Unauthorized Guest"!==e.eventDescription&&"\u7528\u6236\u672a\u8a3b\u518a"!==e.eventDescription),this.spinner.hide()})}getAllGroup(){this.ocService.getAllGroup().subscribe(e=>{this.buildings=e,this.spinner.hide()})}startDateOnchange(e){this.spinner.show(),this.startDate=e.value,0===this.buildingID?(this.alertify.error("Please select department !"),this.spinner.hide()):this.getResultByGroup()}endDateOnchange(e){this.spinner.show(),this.endDate=e.value,this.getResultByGroup()}onClickDefault(){this.spinner.show(),this.startDate=new Date,this.endDate=new Date,this.getResultByGroup()}onChangeBuilding(e){this.spinner.show(),this.buildingID=e.itemData.id,this.getResultByGroup()}toolbarClick(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}dataBound(){this.grid.autoFitColumns()}getBuilding(){const e=JSON.parse(localStorage.getItem("user")).user.id;this.roleService.getRoleByUserID(e).subscribe(e=>{(e=e||{})!=={}&&(this.level=e.id)})}updateCurrentTime(){this.currentTime=w().format("hh:mm:ss A")}logout(){this.cookieService.deleteAll(),localStorage.clear(),this.authService.decodedToken=null,this.authService.currentUser=null,this.authenticationService.logOut(),this.router.navigate(["login"],{queryParams:{uri:this.router.url},replaceUrl:!0}),this.alertify.message("Logged out")}defaultImage(){return this.sanitizer.bypassSecurityTrustResourceUrl("data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAJYAA\n      ACWBAMAAADOL2zRAAAAG1BMVEVsdX3////Hy86jqK1+ho2Ql521ur7a3N7s7e5Yhi\n      PTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABAElEQVRoge3SMW+DMBiE4YsxJqMJtH\n      OTITPeOsLQnaodGImEUMZEkZhRUqn92f0MaTubtfeMh/QGHANEREREREREREREtIJ\n      J0xbH299kp8l8FaGtLdTQ19HjofxZlJ0m1+eBKZcikd9PWtXC5DoDotRO04B9YOvF\n      IXmXLy2jEbiqE6Df7DTleA5socLqvEFVxtJyrpZFWz/pHM2CVte0lS8g2eDe6prOy\n      qPglhzROL+Xye4tmT4WvRcQ2/m81p+/rdguOi8Hc5L/8Qk4vhZzy08DduGt9eVQyP\n      2qoTM1zi0/uf4hvBWf5c77e69Gf798y08L7j0RERERERERERH9P99ZpSVRivB/rgAAAABJRU5ErkJggg==")}getAvatar(){const e=localStorage.getItem("avatar");this.avatar="null"===e?this.defaultImage():this.sanitizer.bypassSecurityTrustResourceUrl("data:image/png;base64, "+e)}imageBase64(e){return"null"===e?this.defaultImage():this.sanitizer.bypassSecurityTrustResourceUrl("data:image/png;base64, "+e)}datetime(e){return this.calendarsService.JSONDateWithTime(e)}openModal(e){this.modalReference=this.modalService.open(e,{size:"xl",backdrop:"static",keyboard:!1})}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(y),n.Nb(M),n.Nb(k),n.Nb(S),n.Nb(T),n.Nb(s.b),n.Nb(c.c),n.Nb(O),n.Nb(p),n.Nb(R.c),n.Nb(v.a),n.Nb(B.a))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-dashboard"]],viewQuery:function(e,t){if(1&e&&n.Ic(N,1),2&e){let e;n.tc(e=n.ec())&&(t.grid=e.first)}},decls:71,vars:33,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[3,"navbarBrandRouterLink","fixed","navbarBrandFull","navbarBrandMinimized","sidebarToggler","asideMenuToggler","mobileAsideMenuToggler"],[1,"nav","navbar-nav","nav-link-dark","d-md-down-none"],[1,"nav-item"],["href","/",1,"nav-link","font-2xl"],[1,"nav","navbar-nav","ml-auto","p-0"],[1,"nav-item","d-md-down-none","mr-2",2,"width","70px"],[1,"nav-link"],[1,"nav-item","d-md-down-none","mr-2"],[1,"font-weight-bold","text-info"],[1,"nav-item","dropdown",2,"cursor","pointer"],["data-toggle","dropdown",1,"nav-link","font-weight-bold"],[1,"dropdown-menu","dropdown-menu-right"],[1,"dropdown-item",3,"click"],[1,"fa","fa-lock"],[1,"app-body"],[1,"main"],[1,"container-fluid"],[1,"card"],[1,"card-body"],[1,"row","mb-2"],[1,"col-md-12","d-flex","justify-content-center","align-items-center"],[1,"font-weight-bold","pr-3"],[3,"dataSource","fields","allowFiltering","value","placeholder","filtering","change"],["ddlelement",""],[1,"font-weight-bold","pr-3",2,"color","transparent"],["type","button",1,"btn","bg-teal",3,"click"],[1,"fa","fa-refresh"],[1,"font-weight-bold","px-3"],[1,"pr-3",3,"value","ngModel","change","ngModelChange"],[1,"row"],[1,"col-md-12"],["id","grid","allowResizing","true","allowFiltering","true","showColumnMenu","true","allowPaging","true","gridLines","Both",3,"dataSource","allowExcelExport","allowSorting","filterSettings","toolbar","pageSettings","searchSettings","dataBound","created","toolbarClick"],["ingredientinfoGrid",""],["field","guestID","textAlign","Center","headerText","EmployeeID","width","150"],["field","guestName","textAlign","Center","headerText","GuestName","width","120"],["field","department","textAlign","Center","headerText","Department","width","100"],["field","date","textAlign","Center","headerText","Date","width","130"],["field","time","textAlign","Center","headerText","Time","width","130"],["field","entryDoor","textAlign","Center","headerText","EntryDoor","width","100"],["field","eventDescription","textAlign","Center","headerText","EventDescription"],["field","verificationSource","textAlign","Center","headerText","VerificationSource"],["href","/"],[1,"ml-auto","mr-2"],["target","_blank","href","http://10.4.5.174:93"],[1,"fa","fa-users"],["versionHistoryModal",""],[1,"modal-header"],[1,"modal-title","ml-1"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngFor","ngForOf"],[1,"callout","callout-info"],[3,"innerHTML"],["for","Name"]],template:function(e,t){1&e&&(n.Ob(0,"ngx-spinner",0),n.Tb(1,"app-header",1),n.Tb(2,"ul",2),n.Tb(3,"li",3),n.Tb(4,"a",4),n.Ec(5,"Chiyu"),n.Sb(),n.Sb(),n.Sb(),n.Tb(6,"ul",5),n.Tb(7,"li",6),n.Ob(8,"div",7),n.Sb(),n.Tb(9,"li",8),n.Tb(10,"a",7),n.Tb(11,"h4",9),n.Ec(12),n.Sb(),n.Sb(),n.Sb(),n.Tb(13,"li",10),n.Tb(14,"a",11),n.Ec(15),n.hc(16,"titlecase"),n.Sb(),n.Tb(17,"div",12),n.Tb(18,"a",13),n.dc("click",function(){return t.logout()}),n.Ob(19,"i",14),n.Ec(20," Sign-out "),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(21,"div",15),n.Tb(22,"main",16),n.Ob(23,"cui-breadcrumb"),n.Tb(24,"div",17),n.Tb(25,"div",18),n.Tb(26,"div",19),n.Tb(27,"div",20),n.Tb(28,"div",21),n.Tb(29,"div",22),n.Ec(30,"Department:"),n.Sb(),n.Tb(31,"ejs-dropdownlist",23,24),n.dc("filtering",function(e){return t.onFilteringBuilding(e)})("change",function(e){return t.onChangeBuilding(e)}),n.Sb(),n.Tb(33,"div",25),n.Ec(34,"|"),n.Sb(),n.Tb(35,"button",26),n.dc("click",function(){return t.onClickDefault()}),n.Ob(36,"i",27),n.Ec(37," Refresh "),n.Sb(),n.Tb(38,"div",28),n.Ec(39,"Start Time:"),n.Sb(),n.Tb(40,"ejs-datepicker",29),n.dc("change",function(e){return t.startDateOnchange(e)})("ngModelChange",function(e){return t.startDate=e}),n.Sb(),n.Tb(41,"div",22),n.Ec(42,"End Time:"),n.Sb(),n.Tb(43,"ejs-datepicker",29),n.dc("change",function(e){return t.endDateOnchange(e)})("ngModelChange",function(e){return t.endDate=e}),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(44,"div",19),n.Tb(45,"div",30),n.Tb(46,"div",31),n.Tb(47,"ejs-grid",32,33),n.dc("dataBound",function(){return t.dataBound()})("created",function(e){return t.createdSearch(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),n.Tb(49,"e-columns"),n.Ob(50,"e-column",34),n.Ob(51,"e-column",35),n.Ob(52,"e-column",36),n.Ob(53,"e-column",37),n.Ob(54,"e-column",38),n.Ob(55,"e-column",39),n.Ob(56,"e-column",40),n.Ob(57,"e-column",41),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(58,"app-footer"),n.Tb(59,"span"),n.Tb(60,"a",42),n.Ec(61,"Copyright \xa9 2021 SHYANG HUNG CHENG INDUSTRIAL CO., LTD All "),n.Sb(),n.Ec(62," \xa9 Right reserved."),n.Sb(),n.Tb(63,"span",43),n.Ec(64,"Powered by "),n.Tb(65,"a",44),n.Ec(66,"Lab-team"),n.Sb(),n.Sb(),n.Ob(67,"i",45),n.Ec(68),n.Sb(),n.Cc(69,J,10,1,"ng-template",null,46,n.Dc)),2&e&&(n.mc("fullScreen",!0),n.Ab(1),n.mc("navbarBrandRouterLink",n.pc(30,P))("fixed",!0)("navbarBrandFull",n.pc(31,G))("navbarBrandMinimized",n.pc(32,H))("sidebarToggler","lg")("asideMenuToggler","lg")("asideMenuToggler",!1)("mobileAsideMenuToggler",!1),n.Ab(11),n.Fc(t.currentTime),n.Ab(3),n.Gc(" ",n.ic(16,28,t.userName)," "),n.Ab(16),n.nc("placeholder","Select a department"),n.mc("dataSource",t.buildings)("fields",t.fieldsBuildings)("allowFiltering",!0)("value",t.buildingID),n.Ab(9),n.mc("value",t.startDate)("ngModel",t.startDate),n.Ab(3),n.mc("value",t.endDate)("ngModel",t.endDate),n.Ab(4),n.mc("dataSource",t.data)("allowExcelExport",!0)("allowSorting",!0)("filterSettings",t.filterSettings)("toolbar",t.toolbarOptions)("pageSettings",t.pageSettings)("searchSettings",t.searchOptions),n.Ab(21),n.Gc(" ",t.online,"\n"))},directives:[R.a,V.e,V.h,L.b,z.a,F.e,F.h,A.f,A.d,A.b,A.c,A.a,V.c,i.l],pipes:[i.u,i.e],styles:[".app-header[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{display:inline-flex!important;align-items:center!important;justify-content:center!important;width:155px!important;padding:0!important;margin-right:0!important;background-color:transparent!important}.e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}"]}),e})(),q=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Hb({type:e,selectors:[["ng-component"]],decls:19,vars:0,consts:[[1,"app","flex-row","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"clearfix"],[1,"float-left","display-3","mr-4"],[1,"pt-3"],[1,"text-muted"],[1,"input-prepend","input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["id","prependedInput","size","16","type","text","placeholder","What are you looking for?",1,"form-control"],[1,"input-group-append"],["type","button",1,"btn","btn-info"]],template:function(e,t){1&e&&(n.Tb(0,"div",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"div",3),n.Tb(4,"div",4),n.Tb(5,"h1",5),n.Ec(6,"404"),n.Sb(),n.Tb(7,"h4",6),n.Ec(8,"Oops! You're lost."),n.Sb(),n.Tb(9,"p",7),n.Ec(10,"The page you are looking for was not found."),n.Sb(),n.Sb(),n.Tb(11,"div",8),n.Tb(12,"div",9),n.Tb(13,"span",10),n.Ob(14,"i",11),n.Sb(),n.Sb(),n.Ob(15,"input",12),n.Tb(16,"span",13),n.Tb(17,"button",14),n.Ec(18,"Search"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb())},encapsulation:2}),e})(),_=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Hb({type:e,selectors:[["ng-component"]],decls:19,vars:0,consts:[[1,"app","flex-row","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"clearfix"],[1,"float-left","display-3","mr-4"],[1,"pt-3"],[1,"text-muted"],[1,"input-prepend","input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-search"],["id","prependedInput","size","16","type","text","placeholder","What are you looking for?",1,"form-control"],[1,"input-group-append"],["type","button",1,"btn","btn-info"]],template:function(e,t){1&e&&(n.Tb(0,"div",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"div",3),n.Tb(4,"div",4),n.Tb(5,"h1",5),n.Ec(6,"500"),n.Sb(),n.Tb(7,"h4",6),n.Ec(8,"Houston, we have a problem!"),n.Sb(),n.Tb(9,"p",7),n.Ec(10,"The page you are looking for is temporarily unavailable."),n.Sb(),n.Sb(),n.Tb(11,"div",8),n.Tb(12,"div",9),n.Tb(13,"span",10),n.Ob(14,"i",11),n.Sb(),n.Sb(),n.Ob(15,"input",12),n.Tb(16,"span",13),n.Tb(17,"button",14),n.Ec(18,"Search"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb())},encapsulation:2}),e})();var Q=r("mrSG");function W(e,t){1&e&&(n.Tb(0,"div",25),n.Ec(1," Login failed. Please try again. "),n.Sb())}const X=[{path:"",pathMatch:"full",component:Y},{path:"404",component:q,data:{title:"Page 404"}},{path:"500",component:_,data:{title:"Page 500"}},{path:"login",component:(()=>{class e{constructor(e,t,r,s,n,i,a){this.route=e,this.router=t,this.authService=r,this.roleService=s,this.spinner=n,this.cookieService=i,this.alertifyService=a,this.busy=!1,this.username="",this.password="",this.loginError=!1,this.user={username:"",password:"",systemCode:b.systemCode},this.remember=!1,void 0!==this.cookieService.get("remember")&&"Yes"===this.cookieService.get("remember")&&(this.user={username:this.cookieService.get("username"),password:this.cookieService.get("password"),systemCode:b.systemCode},this.username=this.cookieService.get("username"),this.password=this.cookieService.get("password"),this.remember=!0,this.login()),this.uri=this.route.snapshot.queryParams.uri||"/system/account"}ngOnInit(){const e=localStorage.getItem("token"),t=localStorage.getItem("refresh_token");if(e&&t&&"login"===this.route.routeConfig.path){const e=decodeURI(this.uri)||"/system/account";this.router.navigate([e])}}onChangeRemember(e){this.remember=e.target.checked}authentication(){return this.authService.login(this.username,this.password).toPromise()}login(){return Object(Q.a)(this,void 0,void 0,function*(){if(this.username&&this.password){this.spinner.show(),this.busy=!0;try{const e=yield this.authentication(),t=localStorage.getItem("lang");t?localStorage.setItem("lang",t):localStorage.setItem("lang","vi"),this.remember?(this.cookieService.set("remember","Yes"),this.cookieService.set("username",this.user.username),this.cookieService.set("password",this.user.password),this.cookieService.set("systemCode",this.user.systemCode.toString())):(this.cookieService.set("remember","No"),this.cookieService.set("username",""),this.cookieService.set("password",""),this.cookieService.set("systemCode","")),localStorage.setItem("user",JSON.stringify(e.user)),this.router.navigate(["/system/account"]),this.alertifyService.success("Login Success!!"),this.busy=!1,this.spinner.hide()}catch(e){this.spinner.hide(),this.busy=!0,this.loginError=!0}}})}getMenu(e){}ngOnDestroy(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}checkRole(){return decodeURI(this.uri),!1}}return e.\u0275fac=function(t){return new(t||e)(n.Nb(c.a),n.Nb(c.c),n.Nb(M),n.Nb(k),n.Nb(R.c),n.Nb(v.a),n.Nb(S))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-login"]],decls:31,vars:5,consts:[["type","square-jelly-box","size","medium",3,"fullScreen"],[1,"loading"],[1,"app-body"],[1,"main","d-flex","align-items-center",2,"margin-top","20vh"],[1,"container"],[1,"row"],[1,"col-md-4","mx-auto"],[1,"card-group"],[1,"card","p-4",2,"background","rgba(238, 238, 238, 0.7)","border","1px solid #DDD"],[1,"card-body"],[3,"ngSubmit"],["form","ngForm"],[1,"text-muted",2,"font-size","20px"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"icon-user"],["type","text","name","username","placeholder","Username","autocomplete","username","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","mb-4"],[1,"icon-lock"],["type","password","name","password","placeholder","Password","autocomplete","current-password","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-6"],[1,"col-6","text-right"],["type","submit",1,"btn","btn-primary","px-4",3,"disabled"],["class","checkbox mb-3 text-danger",4,"ngIf"],[1,"checkbox","mb-3","text-danger"]],template:function(e,t){if(1&e&&(n.Tb(0,"ngx-spinner",0),n.Tb(1,"p",1),n.Ec(2,"Loading data..."),n.Sb(),n.Sb(),n.Tb(3,"div",2),n.Tb(4,"main",3),n.Tb(5,"div",4),n.Tb(6,"div",5),n.Tb(7,"div",6),n.Tb(8,"div",7),n.Tb(9,"div",8),n.Tb(10,"div",9),n.Tb(11,"form",10,11),n.dc("ngSubmit",function(){return t.login()}),n.Tb(13,"h3",12),n.Ec(14,"Digital Mixing Room System"),n.Sb(),n.Tb(15,"div",13),n.Tb(16,"div",14),n.Tb(17,"span",15),n.Ob(18,"i",16),n.Sb(),n.Sb(),n.Tb(19,"input",17),n.dc("ngModelChange",function(e){return t.username=e}),n.Sb(),n.Sb(),n.Tb(20,"div",18),n.Tb(21,"div",14),n.Tb(22,"span",15),n.Ob(23,"i",19),n.Sb(),n.Sb(),n.Tb(24,"input",20),n.dc("ngModelChange",function(e){return t.password=e}),n.Sb(),n.Sb(),n.Tb(25,"div",5),n.Ob(26,"div",21),n.Tb(27,"div",22),n.Tb(28,"button",23),n.Ec(29,"Login"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Cc(30,W,2,0,"div",24),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&e){const e=n.uc(12);n.mc("fullScreen",!0),n.Ab(19),n.mc("ngModel",t.username),n.Ab(5),n.mc("ngModel",t.password),n.Ab(4),n.mc("disabled",!e.valid),n.Ab(2),n.mc("ngIf",t.loginError)}},directives:[R.a,F.l,F.f,F.g,F.a,F.k,F.e,F.h,i.m],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%;background-repeat:no-repeat;background-size:100% 100%;background-image:url(/assets/img/SSB-background.jpg)}"]}),e})(),data:{title:"Login Page"}},{path:"register",component:(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Hb({type:e,selectors:[["app-dashboard"]],decls:44,vars:0,consts:[[1,"app-body"],[1,"main","d-flex","align-items-center"],[1,"container"],[1,"row"],[1,"col-md-6","mx-auto"],[1,"card","mx-4"],[1,"card-body","p-4"],[1,"text-muted"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"icon-user"],["type","text","placeholder","Username","autocomplete","username","required","",1,"form-control"],["type","text","placeholder","Email","autocomplete","email","required","",1,"form-control"],[1,"icon-lock"],["type","password","placeholder","Password","autocomplete","new-password","required","",1,"form-control"],[1,"input-group","mb-4"],["type","password","placeholder","Repeat password","autocomplete","new-password","required","",1,"form-control"],["type","button",1,"btn","btn-block","btn-success"],[1,"card-footer","p-4"],[1,"col-6"],["type","button",1,"btn","btn-block","btn-facebook"],["type","button",1,"btn","btn-block","btn-twitter"]],template:function(e,t){1&e&&(n.Tb(0,"div",0),n.Tb(1,"main",1),n.Tb(2,"div",2),n.Tb(3,"div",3),n.Tb(4,"div",4),n.Tb(5,"div",5),n.Tb(6,"div",6),n.Tb(7,"form"),n.Tb(8,"h1"),n.Ec(9,"Register"),n.Sb(),n.Tb(10,"p",7),n.Ec(11,"Create your account"),n.Sb(),n.Tb(12,"div",8),n.Tb(13,"div",9),n.Tb(14,"span",10),n.Ob(15,"i",11),n.Sb(),n.Sb(),n.Ob(16,"input",12),n.Sb(),n.Tb(17,"div",8),n.Tb(18,"div",9),n.Tb(19,"span",10),n.Ec(20,"@"),n.Sb(),n.Sb(),n.Ob(21,"input",13),n.Sb(),n.Tb(22,"div",8),n.Tb(23,"div",9),n.Tb(24,"span",10),n.Ob(25,"i",14),n.Sb(),n.Sb(),n.Ob(26,"input",15),n.Sb(),n.Tb(27,"div",16),n.Tb(28,"div",9),n.Tb(29,"span",10),n.Ob(30,"i",14),n.Sb(),n.Sb(),n.Ob(31,"input",17),n.Sb(),n.Tb(32,"button",18),n.Ec(33,"Create Account"),n.Sb(),n.Sb(),n.Sb(),n.Tb(34,"div",19),n.Tb(35,"div",3),n.Tb(36,"div",20),n.Tb(37,"button",21),n.Tb(38,"span"),n.Ec(39,"facebook"),n.Sb(),n.Sb(),n.Sb(),n.Tb(40,"div",20),n.Tb(41,"button",22),n.Tb(42,"span"),n.Ec(43,"twitter"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb())},directives:[F.l,F.f,F.g],encapsulation:2}),e})(),data:{title:"Register Page"}},{path:"",component:Y,runGuardsAndResolvers:"always",data:{title:"Home"},children:[]},{path:"**",redirectTo:"404",pathMatch:"full"}];let K=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({imports:[[c.g.forRoot(X,{relativeLinkResolution:"legacy",useHash:!0})],c.g]}),e})();var Z=r("FE24"),ee=r("2ZVE"),te=r("hrfs"),re=r("lawv");let se=(()=>{class e{constructor(e){if(e)throw new Error("Core Module can only be imported to AppModule.")}}return e.\u0275fac=function(t){return new(t||e)(n.ac(e,12))},e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({providers:[],imports:[[i.c]]}),e})();var ne=r("Uc7L"),ie=r("YD+O"),ae=r("MNke"),oe=r("5N8a"),le=r("K8SV"),ce=r("z6cu"),ue=r("un/a");let he=(()=>{class e{constructor(e,t){this.http=e,this.cookieService=t,this.baseUrl=b.apiUrl+"auth/login",this.jwtHelper=new f.a,this.roleValue=new d.a({id:0,name:""}),this.buildingValue=new d.a([{}]),this.levelSource=new d.a({}),this.currentLevel=this.levelSource.asObservable(),this.apiUrl=`${b.apiUrl}account`,this._user=new d.a(null),this.user$=this._user.asObservable(),this._function=new d.a(null),this.function$=this._function.asObservable(),this.functionsValue=new d.a({}),window.addEventListener("storage",this.storageEventListener.bind(this))}storageEventListener(e){e.storageArea===localStorage&&("logout-event"===e.key&&(this.stopTokenTimer(),this._user.next(null),this.setFunctions(null)),"login-event"===e.key&&this.stopTokenTimer(),null!==e.oldValue&&"functions"===e.key&&JSON.stringify(e.oldValue)!==JSON.stringify(e.newValue)&&(this.logOut(),window.location.reload()),null!==e.oldValue&&"level"===e.key&&JSON.stringify(e.oldValue)!==JSON.stringify(e.newValue)&&(this.logOut(),window.location.reload()),"user"===e.key&&null!==e.oldValue&&JSON.stringify(e.oldValue)!==JSON.stringify(e.newValue)&&this.logOut(),"menus"===e.key&&null!==e.oldValue&&JSON.stringify(e.oldValue)!==JSON.stringify(e.newValue)&&this.logOut())}ngOnDestroy(){window.removeEventListener("storage",this.storageEventListener.bind(this))}login(e,t){return this.http.post(`${this.apiUrl}/login`,{username:e,password:t}).pipe(Object(m.a)(e=>{const t=e.loginResult,r=e.user;return localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("avatar",r.user.image),this.decodedToken=this.jwtHelper.decodeToken(t.accessToken),this.currentUser=r.user,this.setLocalStorage(t),this.startTokenTimer(),t}))}getBuildingUserByUserID(e){return this.http.get(`${b.apiUrlEC}BuildingUser/GetBuildingUserByUserID/${e}`,{})}logout(){this.http.post(`${this.apiUrl}/logout`,{}).pipe(Object(E.a)(()=>{this.clearLocalStorage(),this._user.next(null),this.setBuildingValue(null),this.setRoleValue(null),this._user.next(null),this.stopTokenTimer()})).subscribe()}refreshToken(){const e=localStorage.getItem("refresh_token");return e&&e!==void 0+""?this.http.post(`${this.apiUrl}/refresh-token`,{refreshToken:e}).pipe(Object(U.a)(()=>Object(D.a)([])),Object(m.a)(e=>(this.setLocalStorage(e),this.startTokenTimer(),e))):(this.clearLocalStorage(),Object(D.a)(null))}setLocalStorage(e){localStorage.setItem("token",e.accessToken),localStorage.setItem("refresh_token",e.refreshToken),localStorage.setItem("login-event","login"+Math.random())}clearLocalStorage(){localStorage.clear(),localStorage.setItem("logout-event","logout"+Math.random())}getTokenRemainingTime(){const e=localStorage.getItem("token");if(!e)return 0;const t=JSON.parse(atob(e.split(".")[1]));return new Date(1e3*t.exp).getTime()-Date.now()}startTokenTimer(){const e=this.getTokenRemainingTime();this.timer=Object(D.a)(!0).pipe(Object(x.a)(e),Object(C.a)(()=>this.refreshToken().subscribe())).subscribe()}stopTokenTimer(){var e;null===(e=this.timer)||void 0===e||e.unsubscribe()}loggedIn(){const e=localStorage.getItem("token");return!this.jwtHelper.isTokenExpired(e)}logOut(){this.cookieService.deleteAll(),localStorage.clear(),this.decodedToken=null,this.currentUser=null,this.functionsValue.next({}),this._user.next({}),this.buildingValue.next([{}]),this.roleValue.next({})}roleMatch(e){let t=!1;const r=this.decodedToken.role;return e.forEach(e=>{r.includes(e)&&(t=!0)}),t}setBuildingValue(e){this.buildingValue.next(e)}getBuildingValue(){return this.buildingValue.asObservable()}setRoleValue(e){this.roleValue.next(e)}getRoleValue(){return this.roleValue.asObservable()}setFunctions(e){this.functionsValue.next(e)}getFunctionsValue(){return this.functionsValue.asObservable()}}return e.\u0275fac=function(t){return new(t||e)(n.ac(g.b),n.ac(v.a))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),de=(()=>{class e{constructor(e,t,r){this.alertify=e,this.authService=t,this.router=r}handleError(e){if(0===e.status)console.error("An error occurred: status = 0");else{switch(e.status){case 401:break;case 400:console.error(e.error);break;case 500:console.error("M\xe1y ch\u1ee7 \u0111ang g\u1eb7p v\u1ea5n \u0111\u1ec1. Vui l\xf2ng th\u1eed l\u1ea1i sau!<br> The server error. Please try again after sometime!")}console.error(`Backend returned code ${e.status}, body was: ${e.error}`)}return Object(ce.a)("Something bad happened; please try again later.")}intercept(e,t){return localStorage.getItem("token")&&(e=e.clone({setHeaders:{Authorization:`Bearer ${localStorage.getItem("token")}`}})),t.handle(e).pipe(Object(ue.a)(1),Object(U.a)(this.handleError))}}return e.\u0275fac=function(t){return new(t||e)(n.ac(S),n.ac(he),n.ac(c.c))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac}),e})(),ge=(()=>{class e{}return e.CREATE="CREATE",e.EDIT="EDIT",e.DELETE="DELETE",e.VIEW="VIEW",e.APPROVAL="APPROVAL",e.EXCEL_EXPORT="EXCEL_EXPORT",e.EXCEL_IMPORT="EXCEL_IMPORT",e.PRINT="PRINT",e.DONE="DONE",e.STOP_LINE="STOP_LINE",e.FINISH="FINISH",e.RELEASE="RELEASE",e.REJECT="REJECT",e.CLONE="CLONE",e})(),be=(()=>{class e{constructor(e,t,r,s){this.authService=e,this.alertify=t,this.router=r,this.route=s}canActivate(e,t){return this.authService.loggedIn()?!1!==this.checkRole(e)||(this.authService.logOut(),this.alertify.error("Access-denied",!0),!1):(this.router.navigate(["login"],{queryParams:{uri:t.url},replaceUrl:!0}),!1)}checkRole(e){const t=e.data.functionCode;if(t){const e=JSON.parse(localStorage.getItem("functions")).map(e=>null==e?void 0:e.childrens).filter(Boolean),r=[].concat.apply([],e).filter(e=>e.functionCode===t);for(const s of r)if(t.includes(s.functionCode)&&s.code===ge.VIEW)return!0;return!1}return!0}}return e.\u0275fac=function(t){return new(t||e)(n.ac(he),n.ac(S),n.ac(c.c),n.ac(c.a))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),pe=(()=>{class e{constructor(e,t,r){this.roleService=e,this.router=t,this.alertify=r,this.page=1,this.pageSize=10}resolve(e){return this.roleService.getAll().pipe(Object(U.a)(e=>(console.log(e),this.alertify.error("Problem retrieving data"),localStorage.removeItem("user"),localStorage.removeItem("token"),this.router.navigate(["/login"]),Object(D.a)(null))))}}return e.\u0275fac=function(t){return new(t||e)(n.ac(k),n.ac(c.c),n.ac(S))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac}),e})();class me{}const fe={headers:new g.d({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")})};let Se=(()=>{class e{constructor(e){this.http=e,this.baseUrl=b.apiUrl,this.baseUrlEC=b.apiUrlEC,this.messageSource=new d.a(0),this.currentMessage=this.messageSource.asObservable()}changeMessage(e){this.messageSource.next(e)}delete(e){return this.http.delete(`${this.baseUrl}Users/Delete/${e}`)}rename(e){return this.http.post(`${this.baseUrl}Users/rename`,e,{headers:fe.headers})}update(e){return this.http.post(`${this.baseUrl}Users/Update`,e)}getUsers(e=1,t=10,r="%20"){return this.http.get(`${this.baseUrl}Users/GetAllPaging/${b.systemCode}/${e}/${t}/${r}`)}create(e){return this.http.post(`${this.baseUrl}Users/Create`,e)}getAllUsers(e,t){const r=new me;return this.http.get(`${this.baseUrl}Users/GetAllUsers/${b.systemCode}/${e}/${t}`,{observe:"response"}).pipe(Object(m.a)(e=>(r.result=e.body,null!=e.headers.get("Pagination")&&(r.pagination=JSON.parse(e.headers.get("Pagination"))),r)))}search(e,t,r="%20"){const s=new me;return this.http.get(`${this.baseUrl}Users/GetAllUsers/${b.systemCode}/${e}/${t}/${r}`,{observe:"response"}).pipe(Object(m.a)(e=>(s.result=e.body,null!=e.headers.get("Pagination")&&(s.pagination=JSON.parse(e.headers.get("Pagination"))),s)))}changeAvatar(e){return this.http.post(this.baseUrl+"Users/ChangedAvatar",e)}getRole(){return this.http.get(`${this.baseUrl}Roles/GetAll`)}getAllUserInfo(){return this.http.get(`${this.baseUrlEC}UserDetail/getAllUserInfo`)}getAllUserInfoRoles(){return this.http.get(`${this.baseUrlEC}UserDetail/GetAllUserInfoRoles`)}}return e.\u0275fac=function(t){return new(t||e)(n.ac(g.b))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ve=(()=>{class e{constructor(e,t,r){this.todolistService=e,this.router=t,this.alertify=r,this.page=1,this.pageSize=10}resolve(e){return this.todolistService.getAllUsers(this.page,this.pageSize).pipe(Object(U.a)(e=>(console.log(e),this.alertify.error("Problem retrieving data"),localStorage.removeItem("user"),localStorage.removeItem("token"),this.router.navigate(["/login"]),Object(D.a)(null))))}}return e.\u0275fac=function(t){return new(t||e)(n.ac(Se),n.ac(c.c),n.ac(S))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac}),e})();function ye(){return localStorage.getItem("token")}let Te=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.Lb({type:e,bootstrap:[h]}),e.\u0275inj=n.Kb({providers:[be,S,be,R.c,ve,pe,M,{provide:i.j,useClass:i.g},l.c,{provide:g.a,useClass:de,multi:!0}],imports:[[z.b,s.a,z.c,a.a,K,F.b,F.j,i.c,L.a,L.c,g.c,oe.a,A.e,re.a,ae.a,le.a,ie.a,ne.a,se,R.b,f.b.forRoot({config:{tokenGetter:ye,allowedDomains:["10.4.0.76:1009"],disallowedRoutes:["10.4.0.76:1009/api/auth"]}}),s.a,a.a,K,V.a,V.b.forRoot(),V.d,V.f,V.g,o.a,Z.a.forRoot(),ee.a.forRoot(),te.a,l.a,l.b.forRoot()]]}),e})();b.production&&Object(n.S)(),s.c().bootstrapModule(Te,{useJit:!0,preserveWhitespaces:!0}).catch(e=>console.log(e))},zn8P:function(e,t){function r(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="zn8P"}},[[0,0,5]]]);